<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Blockchain database backend. Does not perform any validation."><title>Backend in sp_blockchain - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="sp_blockchain" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0 (05f9846f8 2025-03-31)" data-channel="1.86.0" data-search-js="search-581efc7a.js" data-settings-js="settings-6dad6058.js" ><script src="../static.files/storage-3a5871a4.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-4d63596a.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../sp_blockchain/index.html">sp_<wbr>blockchain</a><span class="version">37.0.1</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Backend</a></h2><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.block_indexed_body" title="block_indexed_body">block_indexed_body</a></li><li><a href="#tymethod.body" title="body">body</a></li><li><a href="#tymethod.children" title="children">children</a></li><li><a href="#tymethod.indexed_transaction" title="indexed_transaction">indexed_transaction</a></li><li><a href="#tymethod.justifications" title="justifications">justifications</a></li><li><a href="#tymethod.last_finalized" title="last_finalized">last_finalized</a></li><li><a href="#tymethod.leaves" title="leaves">leaves</a></li></ul><h3><a href="#provided-methods">Provided Methods</a></h3><ul class="block"><li><a href="#method.displaced_leaves_after_finalizing" title="displaced_leaves_after_finalizing">displaced_leaves_after_finalizing</a></li><li><a href="#method.has_indexed_transaction" title="has_indexed_transaction">has_indexed_transaction</a></li><li><a href="#method.longest_containing" title="longest_containing">longest_containing</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate sp_<wbr>blockchain</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="index.html">sp_blockchain</a></div><h1>Trait <span class="trait">Backend</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/sp_blockchain/backend.rs.html#158-517">Source</a> </span></div><pre class="rust item-decl"><code>pub trait Backend&lt;Block: <a class="trait" href="../sp_runtime/traits/trait.Block.html" title="trait sp_runtime::traits::Block">BlockT</a>&gt;: <a class="trait" href="trait.HeaderBackend.html" title="trait sp_blockchain::HeaderBackend">HeaderBackend</a>&lt;Block&gt; + <a class="trait" href="trait.HeaderMetadata.html" title="trait sp_blockchain::HeaderMetadata">HeaderMetadata</a>&lt;Block, Error = <a class="enum" href="enum.Error.html" title="enum sp_blockchain::Error">Error</a>&gt; {
    // Required methods
    fn <a href="#tymethod.body" class="fn">body</a>(
        &amp;self,
        hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>,
    ) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;&lt;Block as <a class="trait" href="../sp_runtime/traits/trait.Block.html" title="trait sp_runtime::traits::Block">BlockT</a>&gt;::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Extrinsic" title="type sp_runtime::traits::Block::Extrinsic">Extrinsic</a>&gt;&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.justifications" class="fn">justifications</a>(
        &amp;self,
        hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>,
    ) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../sp_runtime/struct.Justifications.html" title="struct sp_runtime::Justifications">Justifications</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.last_finalized" class="fn">last_finalized</a>(&amp;self) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.leaves" class="fn">leaves</a>(&amp;self) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.children" class="fn">children</a>(&amp;self, parent_hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.indexed_transaction" class="fn">indexed_transaction</a>(&amp;self, hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.u8.html">u8</a>&gt;&gt;&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.block_indexed_body" class="fn">block_indexed_body</a>(
        &amp;self,
        hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>,
    ) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.u8.html">u8</a>&gt;&gt;&gt;&gt;;

    // Provided methods
    fn <a href="#method.longest_containing" class="fn">longest_containing</a>(
        &amp;self,
        base_hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>,
        import_lock: &amp;<a class="type" href="../parking_lot/rwlock/type.RwLock.html" title="type parking_lot::rwlock::RwLock">RwLock</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.unit.html">()</a>&gt;,
    ) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>&gt;&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.has_indexed_transaction" class="fn">has_indexed_transaction</a>(&amp;self, hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a>&gt; { ... }
<span class="item-spacer"></span>    fn <a href="#method.displaced_leaves_after_finalizing" class="fn">displaced_leaves_after_finalizing</a>(
        &amp;self,
        finalized_block_hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>,
        finalized_block_number: <a class="type" href="../sp_runtime/traits/type.NumberFor.html" title="type sp_runtime::traits::NumberFor">NumberFor</a>&lt;Block&gt;,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.DisplacedLeavesAfterFinalization.html" title="struct sp_blockchain::DisplacedLeavesAfterFinalization">DisplacedLeavesAfterFinalization</a>&lt;Block&gt;, <a class="enum" href="enum.Error.html" title="enum sp_blockchain::Error">Error</a>&gt; { ... }
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Blockchain database backend. Does not perform any validation.</p>
</div></details><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">ยง</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.body" class="method"><a class="src rightside" href="../src/sp_blockchain/backend.rs.html#162">Source</a><h4 class="code-header">fn <a href="#tymethod.body" class="fn">body</a>(
    &amp;self,
    hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>,
) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;&lt;Block as <a class="trait" href="../sp_runtime/traits/trait.Block.html" title="trait sp_runtime::traits::Block">BlockT</a>&gt;::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Extrinsic" title="type sp_runtime::traits::Block::Extrinsic">Extrinsic</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Get block body. Returns <code>None</code> if block is not found.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.justifications" class="method"><a class="src rightside" href="../src/sp_blockchain/backend.rs.html#164">Source</a><h4 class="code-header">fn <a href="#tymethod.justifications" class="fn">justifications</a>(&amp;self, hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="../sp_runtime/struct.Justifications.html" title="struct sp_runtime::Justifications">Justifications</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Get block justifications. Returns <code>None</code> if no justification exists.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.last_finalized" class="method"><a class="src rightside" href="../src/sp_blockchain/backend.rs.html#166">Source</a><h4 class="code-header">fn <a href="#tymethod.last_finalized" class="fn">last_finalized</a>(&amp;self) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>&gt;</h4></section></summary><div class="docblock"><p>Get last finalized block hash.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.leaves" class="method"><a class="src rightside" href="../src/sp_blockchain/backend.rs.html#171">Source</a><h4 class="code-header">fn <a href="#tymethod.leaves" class="fn">leaves</a>(&amp;self) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Returns hashes of all blocks that are leaves of the block tree.
in other words, that have no children, are chain heads.
Results must be ordered best (longest, highest) chain first.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.children" class="method"><a class="src rightside" href="../src/sp_blockchain/backend.rs.html#174">Source</a><h4 class="code-header">fn <a href="#tymethod.children" class="fn">children</a>(&amp;self, parent_hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Return hashes of all blocks that are children of the block with <code>parent_hash</code>.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.indexed_transaction" class="method"><a class="src rightside" href="../src/sp_blockchain/backend.rs.html#241">Source</a><h4 class="code-header">fn <a href="#tymethod.indexed_transaction" class="fn">indexed_transaction</a>(&amp;self, hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.u8.html">u8</a>&gt;&gt;&gt;</h4></section></summary><div class="docblock"><p>Get single indexed transaction by content hash. Note that this will only fetch transactions
that are indexed by the runtime with <code>storage_index_transaction</code>.</p>
</div></details><section id="tymethod.block_indexed_body" class="method"><a class="src rightside" href="../src/sp_blockchain/backend.rs.html#248">Source</a><h4 class="code-header">fn <a href="#tymethod.block_indexed_body" class="fn">block_indexed_body</a>(&amp;self, hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.u8.html">u8</a>&gt;&gt;&gt;&gt;</h4></section></div><h2 id="provided-methods" class="section-header">Provided Methods<a href="#provided-methods" class="anchor">ยง</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="method.longest_containing" class="method"><a class="src rightside" href="../src/sp_blockchain/backend.rs.html#184-237">Source</a><h4 class="code-header">fn <a href="#method.longest_containing" class="fn">longest_containing</a>(
    &amp;self,
    base_hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>,
    import_lock: &amp;<a class="type" href="../parking_lot/rwlock/type.RwLock.html" title="type parking_lot::rwlock::RwLock">RwLock</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.unit.html">()</a>&gt;,
) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>&gt;&gt;</h4></section></summary><div class="docblock"><p>Get the most recent block hash of the longest chain that contains
a block with the given <code>base_hash</code>.</p>
<p>The search space is always limited to blocks which are in the finalized
chain or descendants of it.</p>
<p>Returns <code>Ok(None)</code> if <code>base_hash</code> is not found in search space.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.has_indexed_transaction" class="method"><a class="src rightside" href="../src/sp_blockchain/backend.rs.html#244-246">Source</a><h4 class="code-header">fn <a href="#method.has_indexed_transaction" class="fn">has_indexed_transaction</a>(&amp;self, hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>) -&gt; <a class="type" href="type.Result.html" title="type sp_blockchain::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a>&gt;</h4></section></summary><div class="docblock"><p>Check if indexed transaction exists.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="method.displaced_leaves_after_finalizing" class="method"><a class="src rightside" href="../src/sp_blockchain/backend.rs.html#251-516">Source</a><h4 class="code-header">fn <a href="#method.displaced_leaves_after_finalizing" class="fn">displaced_leaves_after_finalizing</a>(
    &amp;self,
    finalized_block_hash: Block::<a class="associatedtype" href="../sp_runtime/traits/trait.Block.html#associatedtype.Hash" title="type sp_runtime::traits::Block::Hash">Hash</a>,
    finalized_block_number: <a class="type" href="../sp_runtime/traits/type.NumberFor.html" title="type sp_runtime::traits::NumberFor">NumberFor</a>&lt;Block&gt;,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="struct.DisplacedLeavesAfterFinalization.html" title="struct sp_blockchain::DisplacedLeavesAfterFinalization">DisplacedLeavesAfterFinalization</a>&lt;Block&gt;, <a class="enum" href="enum.Error.html" title="enum sp_blockchain::Error">Error</a>&gt;</h4></section></summary><div class="docblock"><p>Returns all leaves that will be displaced after the block finalization.</p>
</div></details></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">ยง</a></h2><div id="implementors-list"></div><script src="../trait.impl/sp_blockchain/backend/trait.Backend.js" async></script></section></div></main></body></html>