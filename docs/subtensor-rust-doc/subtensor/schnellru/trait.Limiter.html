<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="A trait used to customize the behavior and the limits of the LRU map."><title>Limiter in schnellru - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="schnellru" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0 (05f9846f8 2025-03-31)" data-channel="1.86.0" data-search-js="search-581efc7a.js" data-settings-js="settings-6dad6058.js" ><script src="../static.files/storage-3a5871a4.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-4d63596a.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../schnellru/index.html">schnellru</a><span class="version">0.2.3</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Limiter</a></h2><h3><a href="#required-associated-types">Required Associated Types</a></h3><ul class="block"><li><a href="#associatedtype.KeyToInsert" title="KeyToInsert">KeyToInsert</a></li><li><a href="#associatedtype.LinkType" title="LinkType">LinkType</a></li></ul><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.is_over_the_limit" title="is_over_the_limit">is_over_the_limit</a></li><li><a href="#tymethod.on_cleared" title="on_cleared">on_cleared</a></li><li><a href="#tymethod.on_grow" title="on_grow">on_grow</a></li><li><a href="#tymethod.on_insert" title="on_insert">on_insert</a></li><li><a href="#tymethod.on_removed" title="on_removed">on_removed</a></li><li><a href="#tymethod.on_replace" title="on_replace">on_replace</a></li></ul><h3><a href="#dyn-compatibility">Dyn Compatibility</a></h3><h3><a href="#implementors">Implementors</a></h3></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="index.html">In crate schnellru</a></h2></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="index.html">schnellru</a></div><h1>Trait <span class="trait">Limiter</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/schnellru/lib.rs.html#149-237">Source</a> </span></div><pre class="rust item-decl"><code>pub trait Limiter&lt;K, V&gt; {
    type <a href="#associatedtype.KeyToInsert" class="associatedtype">KeyToInsert</a>&lt;'a&gt;;
    type <a href="#associatedtype.LinkType" class="associatedtype">LinkType</a>: LinkType;

    // Required methods
    fn <a href="#tymethod.is_over_the_limit" class="fn">is_over_the_limit</a>(&amp;self, length: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.on_insert" class="fn">on_insert</a>(
        &amp;mut self,
        length: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a>,
        key: Self::<a class="associatedtype" href="trait.Limiter.html#associatedtype.KeyToInsert" title="type schnellru::Limiter::KeyToInsert">KeyToInsert</a>&lt;'_&gt;,
        value: V,
    ) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.tuple.html">(K, V)</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.on_replace" class="fn">on_replace</a>(
        &amp;mut self,
        length: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a>,
        old_key: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.reference.html">&amp;mut K</a>,
        new_key: Self::<a class="associatedtype" href="trait.Limiter.html#associatedtype.KeyToInsert" title="type schnellru::Limiter::KeyToInsert">KeyToInsert</a>&lt;'_&gt;,
        old_value: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.reference.html">&amp;mut V</a>,
        new_value: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.reference.html">&amp;mut V</a>,
    ) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a>;
<span class="item-spacer"></span>    fn <a href="#tymethod.on_removed" class="fn">on_removed</a>(&amp;mut self, key: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.reference.html">&amp;mut K</a>, value: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.reference.html">&amp;mut V</a>);
<span class="item-spacer"></span>    fn <a href="#tymethod.on_cleared" class="fn">on_cleared</a>(&amp;mut self);
<span class="item-spacer"></span>    fn <a href="#tymethod.on_grow" class="fn">on_grow</a>(&amp;mut self, new_memory_usage: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a>;
}</code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>A trait used to customize the behavior and the limits of the LRU map.</p>
</div></details><h2 id="required-associated-types" class="section-header">Required Associated Types<a href="#required-associated-types" class="anchor">§</a></h2><div class="methods"><details class="toggle" open><summary><section id="associatedtype.KeyToInsert" class="method"><a class="src rightside" href="../src/schnellru/lib.rs.html#157">Source</a><h4 class="code-header">type <a href="#associatedtype.KeyToInsert" class="associatedtype">KeyToInsert</a>&lt;'a&gt;</h4></section></summary><div class="docblock"><p>The type of the key to be inserted into the map.</p>
<p>This is the type which is passed into <code>insert</code>.</p>
<p>This usually should be the same as <code>K</code>, but can be set to a different type
if creating an instance of <code>K</code> is not zero-cost and we want to achieve
zero-cost replacement of existing values through <code>insert</code>.</p>
</div></details><details class="toggle" open><summary><section id="associatedtype.LinkType" class="method"><a class="src rightside" href="../src/schnellru/lib.rs.html#173">Source</a><h4 class="code-header">type <a href="#associatedtype.LinkType" class="associatedtype">LinkType</a>: LinkType</h4></section></summary><div class="docblock"><p>The type used to hold the links between the nodes inside of the LRU map.</p>
<p>In practice this type determines the maximum number of elements that can be in the map,
regardless of any other limits imposed on it.</p>
<p>The exact limit is implementation defined.</p>
<p>The narrower the type the less memory each element in the map
will use, and the map should also get slightly faster as long
as this limit will not be hit.</p>
<p>Can be one of: <code>usize</code>, <code>u32</code>, <code>u16</code>, <code>u8</code>.</p>
<p>You probably want to use either <code>usize</code> or <code>u32</code> here.</p>
</div></details></div><h2 id="required-methods" class="section-header">Required Methods<a href="#required-methods" class="anchor">§</a></h2><div class="methods"><details class="toggle method-toggle" open><summary><section id="tymethod.is_over_the_limit" class="method"><a class="src rightside" href="../src/schnellru/lib.rs.html#181">Source</a><h4 class="code-header">fn <a href="#tymethod.is_over_the_limit" class="fn">is_over_the_limit</a>(&amp;self, length: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Checks whether any of the elements must be popped.</p>
<p>This is called before an element is inserted, and after it was inserted.</p>
<p>The <code>length</code> specifies how many elements will be in the map or how many are currently
in the map, depending on whether this was called before or after an insert.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.on_insert" class="method"><a class="src rightside" href="../src/schnellru/lib.rs.html#192">Source</a><h4 class="code-header">fn <a href="#tymethod.on_insert" class="fn">on_insert</a>(
    &amp;mut self,
    length: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a>,
    key: Self::<a class="associatedtype" href="trait.Limiter.html#associatedtype.KeyToInsert" title="type schnellru::Limiter::KeyToInsert">KeyToInsert</a>&lt;'_&gt;,
    value: V,
) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.86.0/core/option/enum.Option.html" title="enum core::option::Option">Option</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.tuple.html">(K, V)</a>&gt;</h4></section></summary><div class="docblock"><p>Called <em>before</em> a node is inserted into the map.</p>
<p>Should return <code>None</code> if it would be impossible to insert a given element into an empty map.
Otherwise should always return <code>Some</code> and, if applicable, update its internal cost estimate.</p>
<p>Changing the key here in a way that hashes or compares differently is a logic error.</p>
<p>The <code>length</code> specifies how many elements are currently in the map.
The <code>key</code> and <code>value</code> is the key and value of the element we’re about to insert.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.on_replace" class="method"><a class="src rightside" href="../src/schnellru/lib.rs.html#210-217">Source</a><h4 class="code-header">fn <a href="#tymethod.on_replace" class="fn">on_replace</a>(
    &amp;mut self,
    length: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a>,
    old_key: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.reference.html">&amp;mut K</a>,
    new_key: Self::<a class="associatedtype" href="trait.Limiter.html#associatedtype.KeyToInsert" title="type schnellru::Limiter::KeyToInsert">KeyToInsert</a>&lt;'_&gt;,
    old_value: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.reference.html">&amp;mut V</a>,
    new_value: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.reference.html">&amp;mut V</a>,
) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Called <em>before</em> a value is replaced inside of the map.</p>
<p>Should return <code>false</code> if it would be impossible to insert a given element into an empty map.
Otherwise should always return <code>true</code> and, if applicable, update its internal cost estimate.</p>
<p>Returning <code>false</code> will remove the element from the map.</p>
<p>The <code>length</code> specifies how many elements are currently in the map.
The <code>old_key</code> and <code>old_value</code> is the key and value that are already inside of the map.
The <code>new_key</code> and <code>new_value</code> is the key and value of the element we’re about to insert.</p>
<p>Changing the <code>old_key</code> here in a way that hashes or compares differently is a logic error.</p>
<p>This is only called when the keys are equal! The <code>old_key</code> will be kept in the map while
the <code>new_key</code> is moved into this callback, so you’re free to do with it as you see fit.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.on_removed" class="method"><a class="src rightside" href="../src/schnellru/lib.rs.html#222">Source</a><h4 class="code-header">fn <a href="#tymethod.on_removed" class="fn">on_removed</a>(&amp;mut self, key: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.reference.html">&amp;mut K</a>, value: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.reference.html">&amp;mut V</a>)</h4></section></summary><div class="docblock"><p>Called <em>after</em> an element is removed from the map.</p>
<p>If applicable the internal cost estimate should be updated to account for the removed node.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.on_cleared" class="method"><a class="src rightside" href="../src/schnellru/lib.rs.html#227">Source</a><h4 class="code-header">fn <a href="#tymethod.on_cleared" class="fn">on_cleared</a>(&amp;mut self)</h4></section></summary><div class="docblock"><p>Called <em>after</em> the map is cleared.</p>
<p>If applicable the internal cost estimate should be set to zero here.</p>
</div></details><details class="toggle method-toggle" open><summary><section id="tymethod.on_grow" class="method"><a class="src rightside" href="../src/schnellru/lib.rs.html#236">Source</a><h4 class="code-header">fn <a href="#tymethod.on_grow" class="fn">on_grow</a>(&amp;mut self, new_memory_usage: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a>) -&gt; <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.bool.html">bool</a></h4></section></summary><div class="docblock"><p>Called <em>before</em> the map is resized.</p>
<p>Returns whether the map should be allowed to grow.</p>
<p>Returning <code>false</code> here will ensure that no memory will be allocated.</p>
<p>The <code>new_memory_usage</code> specifies how much memory the map will consume <em>after</em> the resize.</p>
</div></details></div><h2 id="dyn-compatibility" class="section-header">Dyn Compatibility<a href="#dyn-compatibility" class="anchor">§</a></h2><div class="dyn-compatibility-info"><p>This trait is <b>not</b> <a href="https://doc.rust-lang.org/1.86.0/reference/items/traits.html#dyn-compatibility">dyn compatible</a>.</p><p><i>In older versions of Rust, dyn compatibility was called "object safety", so this trait is not object safe.</i></p></div><h2 id="implementors" class="section-header">Implementors<a href="#implementors" class="anchor">§</a></h2><div id="implementors-list"><details class="toggle implementors-toggle"><summary><section id="impl-Limiter%3CK,+V%3E-for-ByLength" class="impl"><a class="src rightside" href="../src/schnellru/limiters.rs.html#25-65">Source</a><a href="#impl-Limiter%3CK,+V%3E-for-ByLength" class="anchor">§</a><h3 class="code-header">impl&lt;K, V&gt; <a class="trait" href="trait.Limiter.html" title="trait schnellru::Limiter">Limiter</a>&lt;K, V&gt; for <a class="struct" href="struct.ByLength.html" title="struct schnellru::ByLength">ByLength</a></h3></section></summary><div class="impl-items"><section id="associatedtype.KeyToInsert-1" class="associatedtype trait-impl"><a class="src rightside" href="../src/schnellru/limiters.rs.html#26">Source</a><a href="#associatedtype.KeyToInsert-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.KeyToInsert" class="associatedtype">KeyToInsert</a>&lt;'a&gt; = K</h4></section><section id="associatedtype.LinkType-1" class="associatedtype trait-impl"><a class="src rightside" href="../src/schnellru/limiters.rs.html#27">Source</a><a href="#associatedtype.LinkType-1" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.LinkType" class="associatedtype">LinkType</a> = <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.u32.html">u32</a></h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Limiter%3CK,+V%3E-for-ByMemoryUsage" class="impl"><a class="src rightside" href="../src/schnellru/limiters.rs.html#86-122">Source</a><a href="#impl-Limiter%3CK,+V%3E-for-ByMemoryUsage" class="anchor">§</a><h3 class="code-header">impl&lt;K, V&gt; <a class="trait" href="trait.Limiter.html" title="trait schnellru::Limiter">Limiter</a>&lt;K, V&gt; for <a class="struct" href="struct.ByMemoryUsage.html" title="struct schnellru::ByMemoryUsage">ByMemoryUsage</a></h3></section></summary><div class="impl-items"><section id="associatedtype.KeyToInsert-2" class="associatedtype trait-impl"><a class="src rightside" href="../src/schnellru/limiters.rs.html#87">Source</a><a href="#associatedtype.KeyToInsert-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.KeyToInsert" class="associatedtype">KeyToInsert</a>&lt;'a&gt; = K</h4></section><section id="associatedtype.LinkType-2" class="associatedtype trait-impl"><a class="src rightside" href="../src/schnellru/limiters.rs.html#88">Source</a><a href="#associatedtype.LinkType-2" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.LinkType" class="associatedtype">LinkType</a> = <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.u32.html">u32</a></h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Limiter%3CK,+V%3E-for-Unlimited" class="impl"><a class="src rightside" href="../src/schnellru/limiters.rs.html#135-171">Source</a><a href="#impl-Limiter%3CK,+V%3E-for-Unlimited" class="anchor">§</a><h3 class="code-header">impl&lt;K, V&gt; <a class="trait" href="trait.Limiter.html" title="trait schnellru::Limiter">Limiter</a>&lt;K, V&gt; for <a class="struct" href="struct.Unlimited.html" title="struct schnellru::Unlimited">Unlimited</a></h3></section></summary><div class="impl-items"><section id="associatedtype.KeyToInsert-3" class="associatedtype trait-impl"><a class="src rightside" href="../src/schnellru/limiters.rs.html#136">Source</a><a href="#associatedtype.KeyToInsert-3" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.KeyToInsert" class="associatedtype">KeyToInsert</a>&lt;'a&gt; = K</h4></section><section id="associatedtype.LinkType-3" class="associatedtype trait-impl"><a class="src rightside" href="../src/schnellru/limiters.rs.html#137">Source</a><a href="#associatedtype.LinkType-3" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.LinkType" class="associatedtype">LinkType</a> = <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a></h4></section></div></details><details class="toggle implementors-toggle"><summary><section id="impl-Limiter%3CK,+V%3E-for-UnlimitedCompact" class="impl"><a class="src rightside" href="../src/schnellru/limiters.rs.html#180-216">Source</a><a href="#impl-Limiter%3CK,+V%3E-for-UnlimitedCompact" class="anchor">§</a><h3 class="code-header">impl&lt;K, V&gt; <a class="trait" href="trait.Limiter.html" title="trait schnellru::Limiter">Limiter</a>&lt;K, V&gt; for <a class="struct" href="struct.UnlimitedCompact.html" title="struct schnellru::UnlimitedCompact">UnlimitedCompact</a></h3></section></summary><div class="impl-items"><section id="associatedtype.KeyToInsert-4" class="associatedtype trait-impl"><a class="src rightside" href="../src/schnellru/limiters.rs.html#181">Source</a><a href="#associatedtype.KeyToInsert-4" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.KeyToInsert" class="associatedtype">KeyToInsert</a>&lt;'a&gt; = K</h4></section><section id="associatedtype.LinkType-4" class="associatedtype trait-impl"><a class="src rightside" href="../src/schnellru/limiters.rs.html#182">Source</a><a href="#associatedtype.LinkType-4" class="anchor">§</a><h4 class="code-header">type <a href="#associatedtype.LinkType" class="associatedtype">LinkType</a> = <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.u32.html">u32</a></h4></section></div></details></div><script src="../trait.impl/schnellru/trait.Limiter.js" async></script></section></div></main></body></html>