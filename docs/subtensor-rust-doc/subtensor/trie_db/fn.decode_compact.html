<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Reconstructs a partial trie DB from a compact representation. The encoding is a vector of mutated trie nodes with those child references omitted. The decode function reads them in order from the given slice, reconstructing the full nodes and inserting them into the given `HashDB`. It stops after fully constructing one partial trie and returns the root hash and the number of nodes read. If an error occurs during decoding, there are no guarantees about which entries were or were not added to the DB."><title>decode_compact in trie_db - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../static.files/rustdoc-6c3ea77c.css"><meta name="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="trie_db" data-themes="" data-resource-suffix="" data-rustdoc-version="1.86.0 (05f9846f8 2025-03-31)" data-channel="1.86.0" data-search-js="search-581efc7a.js" data-settings-js="settings-6dad6058.js" ><script src="../static.files/storage-3a5871a4.js"></script><script defer src="sidebar-items.js"></script><script defer src="../static.files/main-4d63596a.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-893ab5e7.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-6580c154.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-044be391.svg"></head><body class="rustdoc fn"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle" title="show sidebar"></button></nav><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../trie_db/index.html">trie_db</a><span class="version">0.29.1</span></h2></div><div class="sidebar-elems"><div id="rustdoc-modnav"></div></div></nav><div class="sidebar-resizer"></div><main><div class="width-limiter"><rustdoc-search></rustdoc-search><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="index.html">trie_db</a></div><h1>Function <span class="fn">decode_compact</span><button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../src/trie_db/trie_codec.rs.html#446-455">Source</a> </span></div><pre class="rust item-decl"><code>pub fn decode_compact&lt;L, DB&gt;(
    db: <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.reference.html">&amp;mut DB</a>,
    encoded: &amp;[<a class="struct" href="https://doc.rust-lang.org/1.86.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.u8.html">u8</a>&gt;],
) -&gt; <a class="type" href="type.Result.html" title="type trie_db::Result">Result</a>&lt;(<a class="type" href="type.TrieHash.html" title="type trie_db::TrieHash">TrieHash</a>&lt;L&gt;, <a class="primitive" href="https://doc.rust-lang.org/1.86.0/std/primitive.usize.html">usize</a>), <a class="type" href="type.TrieHash.html" title="type trie_db::TrieHash">TrieHash</a>&lt;L&gt;, <a class="type" href="type.CError.html" title="type trie_db::CError">CError</a>&lt;L&gt;&gt;<div class="where">where
    L: <a class="trait" href="trait.TrieLayout.html" title="trait trie_db::TrieLayout">TrieLayout</a>,
    DB: <a class="trait" href="trait.HashDB.html" title="trait trie_db::HashDB">HashDB</a>&lt;L::<a class="associatedtype" href="trait.TrieLayout.html#associatedtype.Hash" title="type trie_db::TrieLayout::Hash">Hash</a>, <a class="type" href="type.DBValue.html" title="type trie_db::DBValue">DBValue</a>&gt;,</div></code></pre><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Reconstructs a partial trie DB from a compact representation. The encoding is a vector of
mutated trie nodes with those child references omitted. The decode function reads them in order
from the given slice, reconstructing the full nodes and inserting them into the given <code>HashDB</code>.
It stops after fully constructing one partial trie and returns the root hash and the number of
nodes read. If an error occurs during decoding, there are no guarantees about which entries
were or were not added to the DB.</p>
<p>The number of nodes read may be fewer than the total number of items in <code>encoded</code>. This allows
one to concatenate multiple compact encodings together and still reconstruct them all.
This function makes the assumption that all child references in an inline trie node are inline
references.</p>
</div></details></section></div></main></body></html>