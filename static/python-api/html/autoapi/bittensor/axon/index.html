
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>bittensor.axon &#8212; Bittensor API</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=365ca57ee442770a23c6" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=365ca57ee442770a23c6" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" href="../../../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=eafc0fe6" />
    <link rel="stylesheet" type="text/css" href="../../../_static/bittensor-custom.css?v=2d4d389c" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6" />
  <script src="../../../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=365ca57ee442770a23c6"></script>

    <script src="../../../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../../../_static/doctools.js?v=888ff710"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'autoapi/bittensor/axon/index';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="bittensor.btlogging" href="../btlogging/index.html" />
    <link rel="prev" title="bittensor.extrinsics.unstaking" href="../extrinsics/unstaking/index.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/logo.svg" class="logo__image only-light" alt="Bittensor API - Home"/>
    <script>document.write(`<img src="../../../_static/logo-dark-mode.svg" class="logo__image only-dark" alt="Bittensor API - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="current nav bd-sidenav">
<li class="toctree-l1 current active has-children"><a class="reference internal" href="../index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor</span></code></a><input checked class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../commands/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands</span></code></a><input checked class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-2"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../commands/delegates/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands.delegates</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/identity/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands.identity</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/inspect/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands.inspect</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/list/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands.list</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/metagraph/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands.metagraph</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/misc/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands.misc</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/network/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands.network</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/overview/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands.overview</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/register/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands.register</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/root/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands.root</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/senate/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands.senate</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/stake/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands.stake</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/transfer/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands.transfer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/unstake/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands.unstake</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../commands/wallets/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.commands.wallets</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../extrinsics/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.extrinsics</span></code></a><input checked class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-3"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../extrinsics/delegation/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.extrinsics.delegation</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../extrinsics/log_utilities/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.extrinsics.log_utilities</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../extrinsics/network/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.extrinsics.network</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../extrinsics/prometheus/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.extrinsics.prometheus</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../extrinsics/registration/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.extrinsics.registration</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../extrinsics/root/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.extrinsics.root</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../extrinsics/senate/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.extrinsics.senate</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../extrinsics/serving/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.extrinsics.serving</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../extrinsics/set_weights/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.extrinsics.set_weights</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../extrinsics/staking/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.extrinsics.staking</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../extrinsics/transfer/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.extrinsics.transfer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../extrinsics/unstaking/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.extrinsics.unstaking</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 current active"><a class="current reference internal" href="#"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.axon</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../btlogging/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.btlogging</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../chain_data/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.chain_data</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../cli/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.cli</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../config/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.config</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../dendrite/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.dendrite</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../errors/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.errors</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../keyfile/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.keyfile</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../metagraph/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.metagraph</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../stream/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.stream</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../subtensor/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.subtensor</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../synapse/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.synapse</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../tensor/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.tensor</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../threadpool/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.threadpool</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../types/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.types</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../wallet/index.html"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.wallet</span></code></a></li>
</ul>
</li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/opentensor/bittensor" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/opentensor/bittensor/blob/main/autoapi/bittensor/axon/index.rst?plain=1" target="_blank"
   class="btn btn-sm btn-source-file-button dropdown-item"
   title="Show source"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-code"></i>
  </span>
<span class="btn__text-container">Show source</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/opentensor/bittensor/issues/new?title=Issue%20on%20page%20%2Fautoapi/bittensor/axon/index.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../../../_sources/autoapi/bittensor/axon/index.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>

<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>bittensor.axon</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-contents">Module Contents</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#classes">Classes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#functions">Functions</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.blacklist"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.blacklist()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.dispatch"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.dispatch()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.postprocess"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.postprocess()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.preprocess"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.preprocess()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.priority"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.priority()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.run"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.run()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.verify"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.verify()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.is_running"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.is_running</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.should_exit"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.should_exit</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer._wrapper_run"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer._wrapper_run()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.install_signal_handlers"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.install_signal_handlers()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.run_in_thread"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.run_in_thread()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.start"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.start()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.stop"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.stop()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon"><code class="docutils literal notranslate"><span class="pre">axon</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.__del__"><code class="docutils literal notranslate"><span class="pre">axon.__del__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.__repr__"><code class="docutils literal notranslate"><span class="pre">axon.__repr__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.__str__"><code class="docutils literal notranslate"><span class="pre">axon.__str__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.add_args"><code class="docutils literal notranslate"><span class="pre">axon.add_args()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.attach"><code class="docutils literal notranslate"><span class="pre">axon.attach()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.check_config"><code class="docutils literal notranslate"><span class="pre">axon.check_config()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.config"><code class="docutils literal notranslate"><span class="pre">axon.config()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.default_verify"><code class="docutils literal notranslate"><span class="pre">axon.default_verify()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.help"><code class="docutils literal notranslate"><span class="pre">axon.help()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.info"><code class="docutils literal notranslate"><span class="pre">axon.info()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.serve"><code class="docutils literal notranslate"><span class="pre">axon.serve()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.start"><code class="docutils literal notranslate"><span class="pre">axon.start()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.stop"><code class="docutils literal notranslate"><span class="pre">axon.stop()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.to_string"><code class="docutils literal notranslate"><span class="pre">axon.to_string()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.verify_body_integrity"><code class="docutils literal notranslate"><span class="pre">axon.verify_body_integrity()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.create_error_response"><code class="docutils literal notranslate"><span class="pre">create_error_response()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.log_and_handle_error"><code class="docutils literal notranslate"><span class="pre">log_and_handle_error()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="module-bittensor.axon">
<span id="bittensor-axon"></span><h1><a class="reference internal" href="../index.html#bittensor.axon" title="bittensor.axon"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.axon</span></code></a><a class="headerlink" href="#module-bittensor.axon" title="Link to this heading">#</a></h1>
<p>Create and initialize Axon, which services the forward and backward requests from other neurons.</p>
<section id="module-contents">
<h2>Module Contents<a class="headerlink" href="#module-contents" title="Link to this heading">#</a></h2>
<section id="classes">
<h3>Classes<a class="headerlink" href="#classes" title="Link to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#bittensor.axon.AxonMiddleware" title="bittensor.axon.AxonMiddleware"><code class="xref py py-obj docutils literal notranslate"><span class="pre">AxonMiddleware</span></code></a></p></td>
<td><p>The <cite>AxonMiddleware</cite> class is a key component in the Axon server, responsible for processing all incoming requests.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bittensor.axon.FastAPIThreadedServer" title="bittensor.axon.FastAPIThreadedServer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">FastAPIThreadedServer</span></code></a></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer</span></code> class is a specialized server implementation for the Axon server in the Bittensor network.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#bittensor.axon.axon" title="bittensor.axon.axon"><code class="xref py py-obj docutils literal notranslate"><span class="pre">axon</span></code></a></p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">axon</span></code> class in Bittensor is a fundamental component that serves as the server-side interface for a neuron within the Bittensor network.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Link to this heading">#</a></h3>
<table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#bittensor.axon.create_error_response" title="bittensor.axon.create_error_response"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_error_response</span></code></a>(synapse)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#bittensor.axon.log_and_handle_error" title="bittensor.axon.log_and_handle_error"><code class="xref py py-obj docutils literal notranslate"><span class="pre">log_and_handle_error</span></code></a>(synapse, exception, status_code, ...)</p></td>
<td><p></p></td>
</tr>
</tbody>
</table>
<dl class="py class">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bittensor.axon.</span></span><span class="sig-name descname"><span class="pre">AxonMiddleware</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">app</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">axon</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.AxonMiddleware" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-obj docutils literal notranslate"><span class="pre">starlette.middleware.base.BaseHTTPMiddleware</span></code></p>
<p>The <cite>AxonMiddleware</cite> class is a key component in the Axon server, responsible for processing all incoming requests.</p>
<p>It handles the essential tasks of verifying requests, executing blacklist checks,
running priority functions, and managing the logging of messages and errors. Additionally, the class
is responsible for updating the headers of the response and executing the requested functions.</p>
<p>This middleware acts as an intermediary layer in request handling, ensuring that each request is
processed according to the defined rules and protocols of the Bittensor network. It plays a pivotal
role in maintaining the integrity and security of the network communication.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>app</strong> (<em>FastAPI</em>) – An instance of the FastAPI application to which this middleware is attached.</p></li>
<li><p><strong>axon</strong> (<a class="reference internal" href="../index.html#bittensor.axon" title="bittensor.axon"><em>bittensor.axon</em></a>) – The Axon instance that will process the requests.</p></li>
</ul>
</dd>
</dl>
<p>The middleware operates by intercepting incoming requests, performing necessary preprocessing
(like verification and priority assessment), executing the request through the Axon’s endpoints, and
then handling any postprocessing steps such as response header updating and logging.</p>
<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware.blacklist">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">blacklist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synapse</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.AxonMiddleware.blacklist" title="Link to this definition">#</a></dt>
<dd><p>Checks if the request should be blacklisted. This method ensures that requests from disallowed
sources or with malicious intent are blocked from processing. This can be extremely useful for
preventing spam or other forms of abuse. The blacklist is a list of keys or identifiers that
are prohibited from accessing certain resources.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>synapse</strong> (<a class="reference internal" href="../index.html#bittensor.Synapse" title="bittensor.Synapse"><em>bittensor.Synapse</em></a>) – The Synapse object representing the request.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.12)"><strong>Exception</strong></a> – If the request is found in the blacklist.</p>
</dd>
</dl>
<p>The blacklist check involves:</p>
<ol class="arabic simple">
<li><p>Retrieving the blacklist checking function for the request’s Synapse type.</p></li>
<li><p>Executing the check and handling the case where the request is blacklisted.</p></li>
</ol>
<p>If a request is blacklisted, it is blocked, and an exception is raised to halt further processing.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware.dispatch">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">dispatch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">call_next</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.AxonMiddleware.dispatch" title="Link to this definition">#</a></dt>
<dd><p>Asynchronously processes incoming HTTP requests and returns the corresponding responses. This
method acts as the central processing unit of the AxonMiddleware, handling each step in the
request lifecycle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>request</strong> (<em>Request</em>) – The incoming HTTP request to be processed.</p></li>
<li><p><strong>call_next</strong> (<em>RequestResponseEndpoint</em>) – A callable that processes the request and returns a response.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The HTTP response generated after processing the request.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Response</p>
</dd>
</dl>
<p>This method performs several key functions:</p>
<ol class="arabic simple">
<li><p>Request Preprocessing: Sets up Synapse object from request headers and fills necessary information.</p></li>
<li><p>Logging: Logs the start of request processing.</p></li>
<li><p>Blacklist Checking: Verifies if the request is blacklisted.</p></li>
<li><p>Request Verification: Ensures the authenticity and integrity of the request.</p></li>
<li><p>Priority Assessment: Evaluates and assigns priority to the request.</p></li>
<li><p>Request Execution: Calls the next function in the middleware chain to process the request.</p></li>
<li><p>Response Postprocessing: Updates response headers and logs the end of the request processing.</p></li>
</ol>
<p>The method also handles exceptions and errors that might occur during each stage, ensuring that
appropriate responses are returned to the client.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware.postprocess">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">postprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synapse</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">response</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_time</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.AxonMiddleware.postprocess" title="Link to this definition">#</a></dt>
<dd><p>Performs the final processing on the response before sending it back to the client. This method
updates the response headers and logs the end of the request processing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>synapse</strong> (<a class="reference internal" href="../index.html#bittensor.Synapse" title="bittensor.Synapse"><em>bittensor.Synapse</em></a>) – The Synapse object representing the request.</p></li>
<li><p><strong>response</strong> (<em>Response</em>) – The response generated by processing the request.</p></li>
<li><p><strong>start_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#float" title="(in Python v3.12)"><em>float</em></a>) – The timestamp when the request processing started.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The final HTTP response, with updated headers, ready to be sent back to the client.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Response</p>
</dd>
</dl>
<p>Postprocessing is the last step in the request handling process, ensuring that the response is
properly formatted and contains all necessary information.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware.preprocess">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">preprocess</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.AxonMiddleware.preprocess" title="Link to this definition">#</a></dt>
<dd><p>Performs the initial processing of the incoming request. This method is responsible for
extracting relevant information from the request and setting up the Synapse object, which
represents the state and context of the request within the Axon server.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request</strong> (<em>Request</em>) – The incoming request to be preprocessed.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The Synapse object representing the preprocessed state of the request.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../index.html#bittensor.Synapse" title="bittensor.Synapse">bittensor.Synapse</a></p>
</dd>
</dl>
<p>The preprocessing involves:</p>
<ol class="arabic simple">
<li><p>Extracting the request name from the URL path.</p></li>
<li><p>Creating a Synapse instance from the request headers using the appropriate class type.</p></li>
<li><p>Filling in the Axon and Dendrite information into the Synapse object.</p></li>
<li><p>Signing the Synapse from the Axon side using the wallet hotkey.</p></li>
</ol>
<p>This method sets the foundation for the subsequent steps in the request handling process,
ensuring that all necessary information is encapsulated within the Synapse object.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware.priority">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">priority</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synapse</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.AxonMiddleware.priority" title="Link to this definition">#</a></dt>
<dd><p>Executes the priority function for the request. This method assesses and assigns a priority
level to the request, determining its urgency and importance in the processing queue.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>synapse</strong> (<a class="reference internal" href="../index.html#bittensor.Synapse" title="bittensor.Synapse"><em>bittensor.Synapse</em></a>) – The Synapse object representing the request.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.12)"><strong>Exception</strong></a> – If the priority assessment process encounters issues, such as timeouts.</p>
</dd>
</dl>
<p>The priority function plays a crucial role in managing the processing load and ensuring that
critical requests are handled promptly.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware.run">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">run</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synapse</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">call_next</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.AxonMiddleware.run" title="Link to this definition">#</a></dt>
<dd><p>Executes the requested function as part of the request processing pipeline. This method calls
the next function in the middleware chain to process the request and generate a response.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>synapse</strong> (<a class="reference internal" href="../index.html#bittensor.Synapse" title="bittensor.Synapse"><em>bittensor.Synapse</em></a>) – The Synapse object representing the request.</p></li>
<li><p><strong>call_next</strong> (<em>RequestResponseEndpoint</em>) – The next function in the middleware chain to process requests.</p></li>
<li><p><strong>request</strong> (<em>Request</em>) – The original HTTP request.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The HTTP response generated by processing the request.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Response</p>
</dd>
</dl>
<p>This method is a critical part of the request lifecycle, where the actual processing of the
request takes place, leading to the generation of a response.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.AxonMiddleware.verify">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">verify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synapse</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.AxonMiddleware.verify" title="Link to this definition">#</a></dt>
<dd><p>Verifies the authenticity and integrity of the request. This method ensures that the incoming
request meets the predefined security and validation criteria.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>synapse</strong> (<a class="reference internal" href="../index.html#bittensor.Synapse" title="bittensor.Synapse"><em>bittensor.Synapse</em></a>) – The Synapse object representing the request.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.12)"><strong>Exception</strong></a> – If the verification process fails due to unmet criteria or security concerns.</p>
</dd>
</dl>
<p>The verification process involves:</p>
<ol class="arabic simple">
<li><p>Retrieving the specific verification function for the request’s Synapse type.</p></li>
<li><p>Executing the verification function and handling any exceptions that arise.</p></li>
</ol>
<p>Successful verification allows the request to proceed further in the processing pipeline, while
failure results in an appropriate exception being raised.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bittensor.axon.FastAPIThreadedServer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bittensor.axon.</span></span><span class="sig-name descname"><span class="pre">FastAPIThreadedServer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.FastAPIThreadedServer" title="Link to this definition">#</a></dt>
<dd><p>Bases: <code class="xref py py-obj docutils literal notranslate"><span class="pre">uvicorn.Server</span></code></p>
<p>The <code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer</span></code> class is a specialized server implementation for the Axon server in the Bittensor network.</p>
<p>It extends the functionality of <code class="xref py py-func docutils literal notranslate"><span class="pre">uvicorn.Server()</span></code> to run the FastAPI application in a separate thread, allowing the Axon server to handle HTTP requests concurrently and non-blocking.</p>
<p>This class is designed to facilitate the integration of FastAPI with the Axon’s asynchronous architecture, ensuring efficient and scalable handling of network requests.</p>
<dl class="simple">
<dt>Importance and Functionality</dt><dd><dl class="simple">
<dt>Threaded Execution</dt><dd><p>The class allows the FastAPI application to run in a separate thread, enabling concurrent handling of HTTP requests which is crucial for the performance and scalability of the Axon server.</p>
</dd>
<dt>Seamless Integration</dt><dd><p>By running FastAPI in a threaded manner, this class ensures seamless integration of FastAPI’s capabilities with the Axon server’s asynchronous and multi-threaded architecture.</p>
</dd>
<dt>Controlled Server Management</dt><dd><p>The methods start and stop provide controlled management of the server’s lifecycle, ensuring that the server can be started and stopped as needed, which is vital for maintaining the Axon server’s reliability and availability.</p>
</dd>
<dt>Signal Handling</dt><dd><p>Overriding the default signal handlers prevents potential conflicts with the Axon server’s main application flow, ensuring stable operation in various network conditions.</p>
</dd>
</dl>
</dd>
<dt>Use Cases</dt><dd><dl class="simple">
<dt>Starting the Server</dt><dd><p>When the Axon server is initialized, it can use this class to start the FastAPI application in a separate thread, enabling it to begin handling HTTP requests immediately.</p>
</dd>
<dt>Stopping the Server</dt><dd><p>During shutdown or maintenance of the Axon server, this class can be used to stop the FastAPI application gracefully, ensuring that all resources are properly released.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>should_exit</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – Flag to indicate whether the server should stop running.</p></li>
<li><p><strong>is_running</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><em>bool</em></a>) – Flag to indicate whether the server is currently running.</p></li>
<li><p><strong>config</strong> (<em>uvicorn.config.Config</em>) – </p></li>
</ul>
</dd>
</dl>
<p>The server overrides the default signal handlers to prevent interference with the main application flow and provides methods to start and stop the server in a controlled manner.</p>
<dl class="py attribute">
<dt class="sig sig-object py" id="bittensor.axon.FastAPIThreadedServer.is_running">
<span class="sig-name descname"><span class="pre">is_running</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#bittensor.axon.FastAPIThreadedServer.is_running" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="bittensor.axon.FastAPIThreadedServer.should_exit">
<span class="sig-name descname"><span class="pre">should_exit</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference external" href="https://docs.python.org/3/library/functions.html#bool" title="(in Python v3.12)"><span class="pre">bool</span></a></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#bittensor.axon.FastAPIThreadedServer.should_exit" title="Link to this definition">#</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.FastAPIThreadedServer._wrapper_run">
<span class="sig-name descname"><span class="pre">_wrapper_run</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.FastAPIThreadedServer._wrapper_run" title="Link to this definition">#</a></dt>
<dd><p>A wrapper method for the <a class="reference internal" href="#bittensor.axon.FastAPIThreadedServer.run_in_thread" title="bittensor.axon.FastAPIThreadedServer.run_in_thread"><code class="xref py py-func docutils literal notranslate"><span class="pre">run_in_thread()</span></code></a> context manager. This method is used internally by the <code class="docutils literal notranslate"><span class="pre">start</span></code> method to initiate the server’s execution in a separate thread.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.FastAPIThreadedServer.install_signal_handlers">
<span class="sig-name descname"><span class="pre">install_signal_handlers</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.FastAPIThreadedServer.install_signal_handlers" title="Link to this definition">#</a></dt>
<dd><p>Overrides the default signal handlers provided by <code class="docutils literal notranslate"><span class="pre">uvicorn.Server</span></code>. This method is essential to ensure that the signal handling in the threaded server does not interfere with the main application’s flow, especially in a complex asynchronous environment like the Axon server.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.FastAPIThreadedServer.run_in_thread">
<span class="sig-name descname"><span class="pre">run_in_thread</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.FastAPIThreadedServer.run_in_thread" title="Link to this definition">#</a></dt>
<dd><p>Manages the execution of the server in a separate thread, allowing the FastAPI application to run asynchronously without blocking the main thread of the Axon server. This method is a key component in enabling concurrent request handling in the Axon server.</p>
<dl class="field-list simple">
<dt class="field-odd">Yields<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>None</em> – This method yields control back to the caller while the server is running in the background thread.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.FastAPIThreadedServer.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.FastAPIThreadedServer.start" title="Link to this definition">#</a></dt>
<dd><p>Starts the FastAPI server in a separate thread if it is not already running. This method sets up the server to handle HTTP requests concurrently, enabling the Axon server to efficiently manage
incoming network requests.</p>
<p>The method ensures that the server starts running in a non-blocking manner, allowing the Axon server to continue its other operations seamlessly.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.FastAPIThreadedServer.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.FastAPIThreadedServer.stop" title="Link to this definition">#</a></dt>
<dd><p>Signals the FastAPI server to stop running. This method sets the <a class="reference internal" href="#bittensor.axon.FastAPIThreadedServer.should_exit" title="bittensor.axon.FastAPIThreadedServer.should_exit"><code class="xref py py-func docutils literal notranslate"><span class="pre">should_exit()</span></code></a> flag to <code class="docutils literal notranslate"><span class="pre">True</span></code>, indicating that the server should cease its operations and exit the running thread.</p>
<p>Stopping the server is essential for controlled shutdowns and resource management in the Axon server, especially during maintenance or when redeploying with updated configurations.</p>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="bittensor.axon.axon">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">bittensor.axon.</span></span><span class="sig-name descname"><span class="pre">axon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wallet</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">external_ip</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">external_port</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_workers</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon" title="Link to this definition">#</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">axon</span></code> class in Bittensor is a fundamental component that serves as the server-side interface for a neuron within the Bittensor network.</p>
<p>This class is responsible for managing
incoming requests from other neurons and implements various mechanisms to ensure efficient
and secure network interactions.</p>
<p>An axon relies on a FastAPI router to create endpoints for different message types. These
endpoints are crucial for handling various request types that a neuron might receive. The
class is designed to be flexible and customizable, allowing users to specify custom rules
for forwarding, blacklisting, prioritizing, and verifying incoming requests. The class also
includes internal mechanisms to manage a thread pool, supporting concurrent handling of
requests with defined priority levels.</p>
<p>Methods in this class are equipped to deal with incoming requests from various scenarios in the
network and serve as the server face for a neuron. It accepts multiple arguments, like wallet,
configuration parameters, ip address, server binding  port, external ip, external port and max
workers. Key methods involve managing and operating the FastAPI application router, including
the attachment and operation of endpoints.</p>
<p>Key Features:</p>
<ul class="simple">
<li><p>FastAPI router integration for endpoint creation and management.</p></li>
<li><p>Customizable request handling including forwarding, blacklisting, and prioritization.</p></li>
<li><p>Verification of incoming requests against custom-defined functions.</p></li>
<li><p>Thread pool management for concurrent request handling.</p></li>
<li><p>Command-line argument support for user-friendly program interaction.</p></li>
</ul>
<p>Example Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">bittensor</span>
<span class="c1"># Define your custom synapse class</span>
<span class="k">class</span> <span class="nc">MySyanpse</span><span class="p">(</span> <span class="n">bittensor</span><span class="o">.</span><span class="n">Synapse</span> <span class="p">):</span>
    <span class="nb">input</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">output</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span>

<span class="c1"># Define a custom request forwarding function using your synapse class</span>
<span class="k">def</span> <span class="nf">forward</span><span class="p">(</span> <span class="n">synapse</span><span class="p">:</span> <span class="n">MySyanpse</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MySyanpse</span><span class="p">:</span>
    <span class="c1"># Apply custom logic to synapse and return it</span>
    <span class="n">synapse</span><span class="o">.</span><span class="n">output</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="k">return</span> <span class="n">synapse</span>

<span class="c1"># Define a custom request verification function</span>
<span class="k">def</span> <span class="nf">verify_my_synapse</span><span class="p">(</span> <span class="n">synapse</span><span class="p">:</span> <span class="n">MySyanpse</span> <span class="p">):</span>
    <span class="c1"># Apply custom verification logic to synapse</span>
    <span class="c1"># Optionally raise Exception</span>
    <span class="k">assert</span> <span class="n">synapse</span><span class="o">.</span><span class="n">input</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="o">...</span>

<span class="c1"># Define a custom request blacklist fucntion</span>
<span class="k">def</span> <span class="nf">blacklist_my_synapse</span><span class="p">(</span> <span class="n">synapse</span><span class="p">:</span> <span class="n">MySyanpse</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="c1"># Apply custom blacklist</span>
    <span class="k">return</span> <span class="kc">False</span> <span class="p">(</span> <span class="k">if</span> <span class="n">non</span> <span class="n">blacklisted</span> <span class="p">)</span> <span class="ow">or</span> <span class="kc">True</span> <span class="p">(</span> <span class="k">if</span> <span class="n">blacklisted</span> <span class="p">)</span>

<span class="c1"># Define a custom request priority fucntion</span>
<span class="k">def</span> <span class="nf">prioritize_my_synape</span><span class="p">(</span> <span class="n">synapse</span><span class="p">:</span> <span class="n">MySyanpse</span> <span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="c1"># Apply custom priority</span>
    <span class="k">return</span> <span class="mf">1.0</span>

<span class="c1"># Initialize Axon object with a custom configuration</span>
<span class="n">my_axon</span> <span class="o">=</span> <span class="n">bittensor</span><span class="o">.</span><span class="n">axon</span><span class="p">(</span>
    <span class="n">config</span><span class="o">=</span><span class="n">my_config</span><span class="p">,</span>
    <span class="n">wallet</span><span class="o">=</span><span class="n">my_wallet</span><span class="p">,</span>
    <span class="n">port</span><span class="o">=</span><span class="mi">9090</span><span class="p">,</span>
    <span class="n">ip</span><span class="o">=</span><span class="s2">&quot;192.0.2.0&quot;</span><span class="p">,</span>
    <span class="n">external_ip</span><span class="o">=</span><span class="s2">&quot;203.0.113.0&quot;</span><span class="p">,</span>
    <span class="n">external_port</span><span class="o">=</span><span class="mi">7070</span>
<span class="p">)</span>

<span class="c1"># Attach the endpoint with the specified verification and forward functions.</span>
<span class="n">my_axon</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span>
    <span class="n">forward_fn</span> <span class="o">=</span> <span class="n">forward_my_synapse</span><span class="p">,</span>
    <span class="n">verify_fn</span> <span class="o">=</span> <span class="n">verify_my_synapse</span><span class="p">,</span>
    <span class="n">blacklist_fn</span> <span class="o">=</span> <span class="n">blacklist_my_synapse</span><span class="p">,</span>
    <span class="n">priority_fn</span> <span class="o">=</span> <span class="n">prioritize_my_synape</span>
<span class="p">)</span>

<span class="c1"># Serve and start your axon.</span>
<span class="n">my_axon</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span>
    <span class="n">netuid</span> <span class="o">=</span> <span class="o">...</span>
    <span class="n">subtensor</span> <span class="o">=</span> <span class="o">...</span>
<span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

<span class="c1"># If you have multiple forwarding functions, you can chain attach them.</span>
<span class="n">my_axon</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span>
    <span class="n">forward_fn</span> <span class="o">=</span> <span class="n">forward_my_synapse</span><span class="p">,</span>
    <span class="n">verify_fn</span> <span class="o">=</span> <span class="n">verify_my_synapse</span><span class="p">,</span>
    <span class="n">blacklist_fn</span> <span class="o">=</span> <span class="n">blacklist_my_synapse</span><span class="p">,</span>
    <span class="n">priority_fn</span> <span class="o">=</span> <span class="n">prioritize_my_synape</span>
<span class="p">)</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span>
    <span class="n">forward_fn</span> <span class="o">=</span> <span class="n">forward_my_synapse_2</span><span class="p">,</span>
    <span class="n">verify_fn</span> <span class="o">=</span> <span class="n">verify_my_synapse_2</span><span class="p">,</span>
    <span class="n">blacklist_fn</span> <span class="o">=</span> <span class="n">blacklist_my_synapse_2</span><span class="p">,</span>
    <span class="n">priority_fn</span> <span class="o">=</span> <span class="n">prioritize_my_synape_2</span>
<span class="p">)</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span>
    <span class="n">netuid</span> <span class="o">=</span> <span class="o">...</span>
    <span class="n">subtensor</span> <span class="o">=</span> <span class="o">...</span>
<span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>wallet</strong> (<em>bittensor.wallet</em><em>, </em><em>optional</em>) – Wallet with hotkey and coldkeypub.</p></li>
<li><p><strong>config</strong> (<a class="reference internal" href="../index.html#bittensor.config" title="bittensor.config"><em>bittensor.config</em></a><em>, </em><em>optional</em>) – Configuration parameters for the axon.</p></li>
<li><p><strong>port</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>, </em><em>optional</em>) – Port for server binding.</p></li>
<li><p><strong>ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>, </em><em>optional</em>) – Binding IP address.</p></li>
<li><p><strong>external_ip</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>, </em><em>optional</em>) – External IP address to broadcast.</p></li>
<li><p><strong>external_port</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>, </em><em>optional</em>) – External port to broadcast.</p></li>
<li><p><strong>max_workers</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a><em>, </em><em>optional</em>) – Number of active threads for request handling.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>An instance of the axon class configured as per the provided arguments.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../index.html#bittensor.axon" title="bittensor.axon">bittensor.axon</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This class is a core part of Bittensor’s decentralized network for machine intelligence,
allowing neurons to communicate effectively and securely.</p>
</div>
<dl class="simple">
<dt>Importance and Functionality</dt><dd><dl class="simple">
<dt>Endpoint Registration</dt><dd><p>This method dynamically registers API endpoints based on the Synapse used, allowing the Axon to respond to specific types of requests and synapses.</p>
</dd>
<dt>Customization of Request Handling</dt><dd><p>By attaching different functions, the Axon can customize how it
handles, verifies, prioritizes, and potentially blocks incoming requests, making it adaptable to various network scenarios.</p>
</dd>
<dt>Security and Efficiency</dt><dd><p>The method contributes to both the security (via verification and blacklisting) and efficiency (via prioritization) of request handling, which are crucial in a decentralized network environment.</p>
</dd>
<dt>Flexibility</dt><dd><p>The ability to define custom functions for different aspects of request handling provides great flexibility, allowing the Axon to be tailored to specific needs and use cases within the Bittensor network.</p>
</dd>
<dt>Error Handling and Validation</dt><dd><p>The method ensures that the attached functions meet the required
signatures, providing error handling to prevent runtime issues.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.__del__">
<span class="sig-name descname"><span class="pre">__del__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.__del__" title="Link to this definition">#</a></dt>
<dd><p>This magic method is called when the Axon object is about to be destroyed.
It ensures that the Axon server shuts down properly.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.__repr__">
<span class="sig-name descname"><span class="pre">__repr__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.__repr__" title="Link to this definition">#</a></dt>
<dd><p>Provides a machine-readable (unambiguous) representation of the Axon instance.
It is made identical to __str__ in this case.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.__str__">
<span class="sig-name descname"><span class="pre">__str__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.__str__" title="Link to this definition">#</a></dt>
<dd><p>Provides a human-readable representation of the Axon instance.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)">str</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.add_args">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">add_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parser</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.add_args" title="Link to this definition">#</a></dt>
<dd><p>Adds AxonServer-specific command-line arguments to the argument parser.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parser</strong> (<a class="reference external" href="https://docs.python.org/3/library/argparse.html#argparse.ArgumentParser" title="(in Python v3.12)"><em>argparse.ArgumentParser</em></a>) – Argument parser to which the arguments will be added.</p></li>
<li><p><strong>prefix</strong> (<a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#str" title="(in Python v3.12)"><em>str</em></a><em>, </em><em>optional</em>) – Prefix to add to the argument names. Defaults to None.</p></li>
</ul>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Environment variables are used to define default values for the arguments.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.attach">
<span class="sig-name descname"><span class="pre">attach</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">forward_fn</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blacklist_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">priority_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verify_fn</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.attach" title="Link to this definition">#</a></dt>
<dd><p>Attaches custom functions to the Axon server for handling incoming requests. This method enables
the Axon to define specific behaviors for request forwarding, verification, blacklisting, and
prioritization, thereby customizing its interaction within the Bittensor network.</p>
<p>Registers an API endpoint to the FastAPI application router.
It uses the name of the first argument of the <code class="xref py py-func docutils literal notranslate"><span class="pre">forward_fn()</span></code> function as the endpoint name.</p>
<p>The attach method in the Bittensor framework’s axon class is a crucial function for registering
API endpoints to the Axon’s FastAPI application router. This method allows the Axon server to
define how it handles incoming requests by attaching functions for forwarding, verifying,
blacklisting, and prioritizing requests. It’s a key part of customizing the server’s behavior
and ensuring efficient and secure handling of requests within the Bittensor network.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>forward_fn</strong> (<em>Callable</em>) – Function to be called when the API endpoint is accessed. It should have at least one argument.</p></li>
<li><p><strong>blacklist_fn</strong> (<em>Callable</em><em>, </em><em>optional</em>) – Function to filter out undesired requests. It should take the same arguments as <code class="xref py py-func docutils literal notranslate"><span class="pre">forward_fn()</span></code> and return a boolean value. Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>, meaning no blacklist filter will be used.</p></li>
<li><p><strong>priority_fn</strong> (<em>Callable</em><em>, </em><em>optional</em>) – Function to rank requests based on their priority. It should take the same arguments as <code class="xref py py-func docutils literal notranslate"><span class="pre">forward_fn()</span></code> and return a numerical value representing the request’s priority. Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>, meaning no priority sorting will be applied.</p></li>
<li><p><strong>verify_fn</strong> (<em>Callable</em><em>, </em><em>optional</em>) – Function to verify requests. It should take the same arguments as <code class="xref py py-func docutils literal notranslate"><span class="pre">forward_fn()</span></code> and return a boolean value. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">self.default_verify()</span></code> function will be used.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../index.html#bittensor.axon" title="bittensor.axon">bittensor.axon</a></p>
</dd>
</dl>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The methods <code class="xref py py-func docutils literal notranslate"><span class="pre">forward_fn()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">blacklist_fn()</span></code>, <code class="xref py py-func docutils literal notranslate"><span class="pre">priority_fn()</span></code>, and <code class="xref py py-func docutils literal notranslate"><span class="pre">verify_fn()</span></code> should be designed to receive the same parameters.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AssertionError" title="(in Python v3.12)"><strong>AssertionError</strong></a> – If <code class="xref py py-func docutils literal notranslate"><span class="pre">forward_fn()</span></code> does not have the signature: <code class="docutils literal notranslate"><span class="pre">forward(</span> <span class="pre">synapse:</span> <span class="pre">YourSynapse</span> <span class="pre">)</span> <span class="pre">-&gt;</span> <span class="pre">synapse</span></code>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AssertionError" title="(in Python v3.12)"><strong>AssertionError</strong></a> – If <code class="xref py py-func docutils literal notranslate"><span class="pre">blacklist_fn()</span></code> does not have the signature: <code class="docutils literal notranslate"><span class="pre">blacklist(</span> <span class="pre">synapse:</span> <span class="pre">YourSynapse</span> <span class="pre">)</span> <span class="pre">-&gt;</span> <span class="pre">bool</span></code>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AssertionError" title="(in Python v3.12)"><strong>AssertionError</strong></a> – If <code class="xref py py-func docutils literal notranslate"><span class="pre">priority_fn()</span></code> does not have the signature: <code class="docutils literal notranslate"><span class="pre">priority(</span> <span class="pre">synapse:</span> <span class="pre">YourSynapse</span> <span class="pre">)</span> <span class="pre">-&gt;</span> <span class="pre">float</span></code>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AssertionError" title="(in Python v3.12)"><strong>AssertionError</strong></a> – If <code class="xref py py-func docutils literal notranslate"><span class="pre">verify_fn()</span></code> does not have the signature: <code class="docutils literal notranslate"><span class="pre">verify(</span> <span class="pre">synapse:</span> <span class="pre">YourSynapse</span> <span class="pre">)</span> <span class="pre">-&gt;</span> <span class="pre">None</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Returns the instance of the AxonServer class for potential method chaining.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>self</p>
</dd>
<dt class="field-even">Parameters<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>forward_fn</strong> (<em>Callable</em>) – </p></li>
<li><p><strong>blacklist_fn</strong> (<em>Callable</em>) – </p></li>
<li><p><strong>priority_fn</strong> (<em>Callable</em>) – </p></li>
<li><p><strong>verify_fn</strong> (<em>Callable</em>) – </p></li>
</ul>
</dd>
</dl>
<p>Example Usage:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">forward_custom</span><span class="p">(</span><span class="n">synapse</span><span class="p">:</span> <span class="n">MyCustomSynapse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">MyCustomSynapse</span><span class="p">:</span>
    <span class="c1"># Custom logic for processing the request</span>
    <span class="k">return</span> <span class="n">synapse</span>

<span class="k">def</span> <span class="nf">blacklist_custom</span><span class="p">(</span><span class="n">synapse</span><span class="p">:</span> <span class="n">MyCustomSynapse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">bool</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
    <span class="k">return</span> <span class="kc">True</span><span class="p">,</span> <span class="s2">&quot;Allowed!&quot;</span>

<span class="k">def</span> <span class="nf">priority_custom</span><span class="p">(</span><span class="n">synapse</span><span class="p">:</span> <span class="n">MyCustomSynapse</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
    <span class="k">return</span> <span class="mf">1.0</span>

<span class="k">def</span> <span class="nf">verify_custom</span><span class="p">(</span><span class="n">synapse</span><span class="p">:</span> <span class="n">MyCustomSynapse</span><span class="p">):</span>
    <span class="c1"># Custom logic for verifying the request</span>
    <span class="k">pass</span>

<span class="n">my_axon</span> <span class="o">=</span> <span class="n">bittensor</span><span class="o">.</span><span class="n">axon</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">my_axon</span><span class="o">.</span><span class="n">attach</span><span class="p">(</span><span class="n">forward_fn</span><span class="o">=</span><span class="n">forward_custom</span><span class="p">,</span> <span class="n">verify_fn</span><span class="o">=</span><span class="n">verify_custom</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <a class="reference internal" href="../index.html#bittensor.axon.attach" title="bittensor.axon.attach"><code class="xref py py-func docutils literal notranslate"><span class="pre">attach()</span></code></a> method is fundamental in setting up the Axon server’s request handling capabilities,
enabling it to participate effectively and securely in the Bittensor network. The flexibility
offered by this method allows developers to tailor the Axon’s behavior to specific requirements and
use cases.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.check_config">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">check_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.check_config" title="Link to this definition">#</a></dt>
<dd><p>This method checks the configuration for the axon’s port and wallet.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>config</strong> (<a class="reference internal" href="../index.html#bittensor.config" title="bittensor.config"><em>bittensor.config</em></a>) – The config object holding axon settings.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#AssertionError" title="(in Python v3.12)"><strong>AssertionError</strong></a> – If the axon or external ports are not in range [1024, 65535]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.config">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">config</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.config" title="Link to this definition">#</a></dt>
<dd><p>Parses the command-line arguments to form a Bittensor configuration object.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>Configuration object with settings from command-line arguments.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../index.html#bittensor.config" title="bittensor.config">bittensor.config</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.default_verify">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">default_verify</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synapse</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.default_verify" title="Link to this definition">#</a></dt>
<dd><p>This method is used to verify the authenticity of a received message using a digital signature.</p>
<p>It ensures that the message was not tampered with and was sent by the expected sender.</p>
<p>The <a class="reference internal" href="../index.html#bittensor.axon.default_verify" title="bittensor.axon.default_verify"><code class="xref py py-func docutils literal notranslate"><span class="pre">default_verify()</span></code></a> method in the Bittensor framework is a critical security function within the
Axon server. It is designed to authenticate incoming messages by verifying their digital
signatures. This verification ensures the integrity of the message and confirms that it was
indeed sent by the claimed sender. The method plays a pivotal role in maintaining the trustworthiness
and reliability of the communication within the Bittensor network.</p>
<dl class="simple">
<dt>Key Features</dt><dd><dl class="simple">
<dt>Security Assurance</dt><dd><p>The default_verify method is crucial for ensuring the security of the Bittensor network. By verifying digital signatures, it guards against unauthorized access
and data manipulation.</p>
</dd>
<dt>Preventing Replay Attacks</dt><dd><p>The method checks for increasing nonce values, which is a vital
step in preventing replay attacks. A replay attack involves an adversary reusing or
delaying the transmission of a valid data transmission to deceive the receiver.</p>
</dd>
<dt>Authenticity and Integrity Checks</dt><dd><p>By verifying that the message’s digital signature matches
its content, the method ensures the message’s authenticity (it comes from the claimed
sender) and integrity (it hasn’t been altered during transmission).</p>
</dd>
<dt>Trust in Communication</dt><dd><p>This method fosters trust in the network communication. Neurons
(nodes in the Bittensor network) can confidently interact, knowing that the messages they
receive are genuine and have not been tampered with.</p>
</dd>
<dt>Cryptographic Techniques</dt><dd><p>The method’s reliance on asymmetric encryption techniques is a
cornerstone of modern cryptographic security, ensuring that only entities with the correct
cryptographic keys can participate in secure communication.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>synapse</strong> (<a class="reference internal" href="../index.html#bittensor.Synapse" title="bittensor.Synapse"><em>bittensor.Synapse</em></a>) – bittensor.Synapse
bittensor request synapse.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.12)"><strong>Exception</strong></a> – If the <code class="docutils literal notranslate"><span class="pre">receiver_hotkey</span></code> doesn’t match with <code class="docutils literal notranslate"><span class="pre">self.receiver_hotkey</span></code>.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.12)"><strong>Exception</strong></a> – If the nonce is not larger than the previous nonce for the same endpoint key.</p></li>
<li><p><a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.12)"><strong>Exception</strong></a> – If the signature verification fails.</p></li>
</ul>
</dd>
</dl>
<p>After successful verification, the nonce for the given endpoint key is updated.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The verification process assumes the use of an asymmetric encryption algorithm,
where the sender signs the message with their private key and the receiver verifies the
signature using the sender’s public key.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.help">
<em class="property"><span class="pre">classmethod</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">help</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.help" title="Link to this definition">#</a></dt>
<dd><p>Prints the help text (list of command-line arguments and their descriptions) to stdout.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.info">
<span class="sig-name descname"><span class="pre">info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.info" title="Link to this definition">#</a></dt>
<dd><p>Returns the axon info object associated with this axon.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../index.html#bittensor.AxonInfo" title="bittensor.AxonInfo">bittensor.AxonInfo</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.serve">
<span class="sig-name descname"><span class="pre">serve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">netuid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subtensor</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.serve" title="Link to this definition">#</a></dt>
<dd><p>Serves the Axon on the specified subtensor connection using the configured wallet. This method
registers the Axon with a specific subnet within the Bittensor network, identified by the <code class="docutils literal notranslate"><span class="pre">netuid</span></code>.
It links the Axon to the broader network, allowing it to participate in the decentralized exchange
of information.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>netuid</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – The unique identifier of the subnet to register on. This ID is essential for the Axon to correctly position itself within the Bittensor network topology.</p></li>
<li><p><strong>subtensor</strong> (<em>bittensor.subtensor</em><em>, </em><em>optional</em>) – The subtensor connection to use for serving. If not provided, a new connection is established based on default configurations.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The Axon instance that is now actively serving on the specified subtensor.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="../index.html#bittensor.axon" title="bittensor.axon">bittensor.axon</a></p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_axon</span> <span class="o">=</span> <span class="n">bittensor</span><span class="o">.</span><span class="n">axon</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">subtensor</span> <span class="o">=</span> <span class="n">bt</span><span class="o">.</span><span class="n">subtensor</span><span class="p">(</span><span class="n">network</span><span class="o">=</span><span class="s2">&quot;local&quot;</span><span class="p">)</span> <span class="c1"># Local by default</span>
<span class="n">my_axon</span><span class="o">.</span><span class="n">serve</span><span class="p">(</span><span class="n">netuid</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">subtensor</span><span class="o">=</span><span class="n">subtensor</span><span class="p">)</span>  <span class="c1"># Serves the axon on subnet with netuid 1</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">serve</span></code> method is crucial for integrating the Axon into the Bittensor network, allowing it
to start receiving and processing requests from other neurons.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.start">
<span class="sig-name descname"><span class="pre">start</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.start" title="Link to this definition">#</a></dt>
<dd><p>Starts the Axon server and its underlying FastAPI server thread, transitioning the state of the
Axon instance to <code class="docutils literal notranslate"><span class="pre">started</span></code>. This method initiates the server’s ability to accept and process
incoming network requests, making it an active participant in the Bittensor network.</p>
<p>The start method triggers the FastAPI server associated with the Axon to begin listening for
incoming requests. It is a crucial step in making the neuron represented by this Axon operational
within the Bittensor network.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Axon instance in the ‘started’ state.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../index.html#bittensor.axon" title="bittensor.axon">bittensor.axon</a></p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_axon</span> <span class="o">=</span> <span class="n">bittensor</span><span class="o">.</span><span class="n">axon</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="o">...</span> <span class="c1"># setup axon, attach functions, etc.</span>
<span class="n">my_axon</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>  <span class="c1"># Starts the axon server</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>After invoking this method, the Axon is ready to handle requests as per its configured endpoints and custom logic.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.stop">
<span class="sig-name descname"><span class="pre">stop</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.stop" title="Link to this definition">#</a></dt>
<dd><p>Stops the Axon server and its underlying GRPC server thread, transitioning the state of the Axon
instance to <code class="docutils literal notranslate"><span class="pre">stopped</span></code>. This method ceases the server’s ability to accept new network requests,
effectively removing the neuron’s server-side presence in the Bittensor network.</p>
<p>By stopping the FastAPI server, the Axon ceases to listen for incoming requests, and any existing
connections are gracefully terminated. This function is typically used when the neuron is being
shut down or needs to temporarily go offline.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The Axon instance in the ‘stopped’ state.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><a class="reference internal" href="../index.html#bittensor.axon" title="bittensor.axon">bittensor.axon</a></p>
</dd>
</dl>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">my_axon</span> <span class="o">=</span> <span class="n">bittensor</span><span class="o">.</span><span class="n">axon</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
<span class="n">my_axon</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
<span class="o">...</span>
<span class="n">my_axon</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>  <span class="c1"># Stops the axon server</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is advisable to ensure that all ongoing processes or requests are completed or properly handled before invoking this method.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.to_string">
<span class="sig-name descname"><span class="pre">to_string</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.to_string" title="Link to this definition">#</a></dt>
<dd><p>Provides a human-readable representation of the AxonInfo for this Axon.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="bittensor.axon.axon.verify_body_integrity">
<em class="property"><span class="pre">async</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">verify_body_integrity</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">request</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.axon.verify_body_integrity" title="Link to this definition">#</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">verify_body_integrity</span></code> method in the Bittensor framework is a key security function within the
Axon server’s middleware. It is responsible for ensuring the integrity of the body of incoming HTTP
requests.</p>
<p>It asynchronously verifies the integrity of the body of a request by comparing the hash of required fields
with the corresponding hashes provided in the request headers. This method is critical for ensuring
that the incoming request payload has not been altered or tampered with during transmission, establishing
a level of trust and security between the sender and receiver in the network.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>request</strong> (<em>Request</em>) – The incoming FastAPI request object containing both headers and the request body.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><dl class="simple">
<dt>Returns the parsed body of the request as a dictionary if all the hash comparisons match,</dt><dd><p>indicating that the body is intact and has not been tampered with.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference external" href="https://docs.python.org/3/library/stdtypes.html#dict" title="(in Python v3.12)">dict</a></p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>JSONResponse</strong> – Raises a JSONResponse with a 400 status code if any of the hash comparisons fail,
indicating a potential integrity issue with the incoming request payload.
The response includes the detailed error message specifying which field has a hash mismatch.</p>
</dd>
</dl>
<p>This method performs several key functions:</p>
<ol class="arabic simple">
<li><p>Decoding and loading the request body for inspection.</p></li>
<li><p>Gathering required field names for hash comparison from the Axon configuration.</p></li>
<li><p>Loading and parsing the request body into a dictionary.</p></li>
<li><p>Reconstructing the Synapse object and recomputing the hash for verification and logging.</p></li>
<li><p>Comparing the recomputed hash with the hash provided in the request headers for verification.</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The integrity verification is an essential step in ensuring the security of the data exchange
within the Bittensor network. It helps prevent tampering and manipulation of data during transit,
thereby maintaining the reliability and trust in the network communication.</p>
</div>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bittensor.axon.create_error_response">
<span class="sig-prename descclassname"><span class="pre">bittensor.axon.</span></span><span class="sig-name descname"><span class="pre">create_error_response</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synapse</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.create_error_response" title="Link to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>synapse</strong> (<a class="reference internal" href="../index.html#bittensor.Synapse" title="bittensor.Synapse"><em>bittensor.Synapse</em></a>) – </p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="bittensor.axon.log_and_handle_error">
<span class="sig-prename descclassname"><span class="pre">bittensor.axon.</span></span><span class="sig-name descname"><span class="pre">log_and_handle_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">synapse</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">exception</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">status_code</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_time</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#bittensor.axon.log_and_handle_error" title="Link to this definition">#</a></dt>
<dd><dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>synapse</strong> (<em>bittensor.synapse</em>) – </p></li>
<li><p><strong>exception</strong> (<a class="reference external" href="https://docs.python.org/3/library/exceptions.html#Exception" title="(in Python v3.12)"><em>Exception</em></a>) – </p></li>
<li><p><strong>status_code</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – </p></li>
<li><p><strong>start_time</strong> (<a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.12)"><em>int</em></a>) – </p></li>
</ul>
</dd>
</dl>
</dd></dl>

</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  <!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="../extrinsics/unstaking/index.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.extrinsics.unstaking</span></code></p>
      </div>
    </a>
    <a class="right-next"
       href="../btlogging/index.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><code class="xref py py-mod docutils literal notranslate"><span class="pre">bittensor.btlogging</span></code></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#module-contents">Module Contents</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#classes">Classes</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#functions">Functions</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.blacklist"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.blacklist()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.dispatch"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.dispatch()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.postprocess"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.postprocess()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.preprocess"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.preprocess()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.priority"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.priority()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.run"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.run()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.AxonMiddleware.verify"><code class="docutils literal notranslate"><span class="pre">AxonMiddleware.verify()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.is_running"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.is_running</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.should_exit"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.should_exit</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer._wrapper_run"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer._wrapper_run()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.install_signal_handlers"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.install_signal_handlers()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.run_in_thread"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.run_in_thread()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.start"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.start()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.FastAPIThreadedServer.stop"><code class="docutils literal notranslate"><span class="pre">FastAPIThreadedServer.stop()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon"><code class="docutils literal notranslate"><span class="pre">axon</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.__del__"><code class="docutils literal notranslate"><span class="pre">axon.__del__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.__repr__"><code class="docutils literal notranslate"><span class="pre">axon.__repr__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.__str__"><code class="docutils literal notranslate"><span class="pre">axon.__str__()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.add_args"><code class="docutils literal notranslate"><span class="pre">axon.add_args()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.attach"><code class="docutils literal notranslate"><span class="pre">axon.attach()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.check_config"><code class="docutils literal notranslate"><span class="pre">axon.check_config()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.config"><code class="docutils literal notranslate"><span class="pre">axon.config()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.default_verify"><code class="docutils literal notranslate"><span class="pre">axon.default_verify()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.help"><code class="docutils literal notranslate"><span class="pre">axon.help()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.info"><code class="docutils literal notranslate"><span class="pre">axon.info()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.serve"><code class="docutils literal notranslate"><span class="pre">axon.serve()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.start"><code class="docutils literal notranslate"><span class="pre">axon.start()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.stop"><code class="docutils literal notranslate"><span class="pre">axon.stop()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.to_string"><code class="docutils literal notranslate"><span class="pre">axon.to_string()</span></code></a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.axon.verify_body_integrity"><code class="docutils literal notranslate"><span class="pre">axon.verify_body_integrity()</span></code></a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.create_error_response"><code class="docutils literal notranslate"><span class="pre">create_error_response()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#bittensor.axon.log_and_handle_error"><code class="docutils literal notranslate"><span class="pre">log_and_handle_error()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Opentensor Foundation
</p>

  </div>
  
  <div class="footer-item">
    
  <p class="copyright">
    
      © Copyright 2024, Opentensor Foundation.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=365ca57ee442770a23c6"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=365ca57ee442770a23c6"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>