
<!DOCTYPE html>


<html lang="en" data-content_root="../../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>bittensor.core.synapse &#8212; BTCLI Docs 1.0 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=fd3f3429" />
    <link rel="stylesheet" type="text/css" href="../../../_static/bittensor-custom.css?v=c1dfe055" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../../_static/documentation_options.js?v=a681ed88"></script>
    <script src="../../../_static/doctools.js?v=9a2dae69"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '_modules/bittensor/core/synapse';</script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../../../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../../../_static/logo.svg" class="logo__image only-light" alt="BTCLI Docs 1.0 documentation - Home"/>
    <script>document.write(`<img src="../../../_static/logo-dark-mode.svg" class="logo__image only-dark" alt="BTCLI Docs 1.0 documentation - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../autoapi/index.html">API Reference</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../autoapi/bittensor/index.html">bittensor</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../autoapi/bittensor/core/index.html">bittensor.core</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/core/chain_data/index.html">bittensor.core.chain_data</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/core/extrinsics/index.html">bittensor.core.extrinsics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/core/axon/index.html">bittensor.core.axon</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/core/config/index.html">bittensor.core.config</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/core/dendrite/index.html">bittensor.core.dendrite</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/core/errors/index.html">bittensor.core.errors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/core/metagraph/index.html">bittensor.core.metagraph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/core/settings/index.html">bittensor.core.settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/core/stream/index.html">bittensor.core.stream</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/core/subtensor/index.html">bittensor.core.subtensor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/core/synapse/index.html">bittensor.core.synapse</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/core/tensor/index.html">bittensor.core.tensor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/core/threadpool/index.html">bittensor.core.threadpool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/core/types/index.html">bittensor.core.types</a></li>
</ul>
</details></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../autoapi/bittensor/utils/index.html">bittensor.utils</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/utils/btlogging/index.html">bittensor.utils.btlogging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/utils/mock/index.html">bittensor.utils.mock</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/utils/axon_utils/index.html">bittensor.utils.axon_utils</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/utils/balance/index.html">bittensor.utils.balance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/utils/deprecated/index.html">bittensor.utils.deprecated</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/utils/networking/index.html">bittensor.utils.networking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/utils/registration/index.html">bittensor.utils.registration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/utils/subnets/index.html">bittensor.utils.subnets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/utils/version/index.html">bittensor.utils.version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../autoapi/bittensor/utils/weight_utils/index.html">bittensor.utils.weight_utils</a></li>
</ul>
</details></li>
<li class="toctree-l3"><a class="reference internal" href="../../../autoapi/bittensor/__main__/index.html">bittensor.__main__</a></li>
</ul>
</details></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/opentensor/btcli" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/opentensor/btcli/issues/new?title=Issue%20on%20page%20%2F_modules/bittensor/core/synapse.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>

</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1></h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <h1>Source code for bittensor.core.synapse</h1><div class="highlight"><pre>
<span></span><span class="c1"># The MIT License (MIT)</span>
<span class="c1"># Copyright © 2024 Opentensor Foundation</span>
<span class="c1">#</span>
<span class="c1"># Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated</span>
<span class="c1"># documentation files (the “Software”), to deal in the Software without restriction, including without limitation</span>
<span class="c1"># the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software,</span>
<span class="c1"># and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</span>
<span class="c1">#</span>
<span class="c1"># The above copyright notice and this permission notice shall be included in all copies or substantial portions of</span>
<span class="c1"># the Software.</span>
<span class="c1">#</span>
<span class="c1"># THE SOFTWARE IS PROVIDED “AS IS”, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO</span>
<span class="c1"># THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL</span>
<span class="c1"># THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION</span>
<span class="c1"># OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER</span>
<span class="c1"># DEALINGS IN THE SOFTWARE.</span>

<span class="kn">import</span> <span class="nn">base64</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">warnings</span>
<span class="kn">from</span> <span class="nn">typing</span> <span class="kn">import</span> <span class="n">cast</span><span class="p">,</span> <span class="n">Any</span><span class="p">,</span> <span class="n">ClassVar</span><span class="p">,</span> <span class="n">Optional</span><span class="p">,</span> <span class="n">Union</span>

<span class="kn">from</span> <span class="nn">pydantic</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">BaseModel</span><span class="p">,</span>
    <span class="n">ConfigDict</span><span class="p">,</span>
    <span class="n">Field</span><span class="p">,</span>
    <span class="n">field_validator</span><span class="p">,</span>
    <span class="n">model_validator</span><span class="p">,</span>
<span class="p">)</span>

<span class="kn">from</span> <span class="nn">bittensor.utils</span> <span class="kn">import</span> <span class="n">get_hash</span>
<span class="kn">from</span> <span class="nn">bittensor.utils.btlogging</span> <span class="kn">import</span> <span class="n">logging</span>


<div class="viewcode-block" id="get_size">
<a class="viewcode-back" href="../../../autoapi/bittensor/core/synapse/index.html#bittensor.core.synapse.get_size">[docs]</a>
<span class="k">def</span> <span class="nf">get_size</span><span class="p">(</span><span class="n">obj</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span> <span class="n">seen</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">set</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Recursively finds size of objects.</span>

<span class="sd">    This function traverses every item of a given object and sums their sizes to compute the total size.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj (Any): The object to get the size of.</span>
<span class="sd">        seen (Optional[set]): Set of object ids that have been calculated.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: The total size of the object.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">size</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">seen</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">seen</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="n">obj_id</span> <span class="o">=</span> <span class="nb">id</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj_id</span> <span class="ow">in</span> <span class="n">seen</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">0</span>
    <span class="c1"># Important mark as seen *before* entering recursion to gracefully handle</span>
    <span class="c1"># self-referential objects</span>
    <span class="n">seen</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
        <span class="n">size</span> <span class="o">+=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">get_size</span><span class="p">(</span><span class="n">v</span><span class="p">,</span> <span class="n">seen</span><span class="p">)</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">values</span><span class="p">()])</span>
        <span class="n">size</span> <span class="o">+=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">get_size</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">seen</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">obj</span><span class="o">.</span><span class="n">keys</span><span class="p">()])</span>
    <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;__dict__&quot;</span><span class="p">):</span>
        <span class="n">size</span> <span class="o">+=</span> <span class="n">get_size</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="vm">__dict__</span><span class="p">,</span> <span class="n">seen</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;__iter__&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="p">(</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bytes</span><span class="p">,</span> <span class="nb">bytearray</span><span class="p">)):</span>
        <span class="n">size</span> <span class="o">+=</span> <span class="nb">sum</span><span class="p">([</span><span class="n">get_size</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">seen</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">obj</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">size</span></div>



<div class="viewcode-block" id="cast_int">
<a class="viewcode-back" href="../../../autoapi/bittensor/core/synapse/index.html#bittensor.core.synapse.cast_int">[docs]</a>
<span class="k">def</span> <span class="nf">cast_int</span><span class="p">(</span><span class="n">raw</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts a string to an integer, if the string is not ``None``.</span>

<span class="sd">    This function attempts to convert a string to an integer. If the string is ``None``, it simply returns ``None``.</span>

<span class="sd">    Args:</span>
<span class="sd">        raw (str): The string to convert.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int or None: The converted integer, or ``None`` if the input was ``None``.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span> <span class="k">if</span> <span class="n">raw</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">raw</span></div>



<div class="viewcode-block" id="cast_float">
<a class="viewcode-back" href="../../../autoapi/bittensor/core/synapse/index.html#bittensor.core.synapse.cast_float">[docs]</a>
<span class="k">def</span> <span class="nf">cast_float</span><span class="p">(</span><span class="n">raw</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts a string to a float, if the string is not ``None``.</span>

<span class="sd">    This function attempts to convert a string to a float. If the string is ``None``, it simply returns ``None``.</span>

<span class="sd">    Args:</span>
<span class="sd">        raw (str): The string to convert.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float or None: The converted float, or ``None`` if the input was ``None``.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">raw</span><span class="p">)</span> <span class="k">if</span> <span class="n">raw</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">raw</span></div>



<div class="viewcode-block" id="TerminalInfo">
<a class="viewcode-back" href="../../../autoapi/bittensor/index.html#bittensor.core.synapse.TerminalInfo">[docs]</a>
<span class="k">class</span> <span class="nc">TerminalInfo</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    TerminalInfo encapsulates detailed information about a network synapse (node) involved in a communication process.</span>

<span class="sd">    This class serves as a metadata carrier,</span>
<span class="sd">    providing essential details about the state and configuration of a terminal during network interactions. This is a crucial class in the Bittensor framework.</span>

<span class="sd">    The TerminalInfo class contains information such as HTTP status codes and messages, processing times,</span>
<span class="sd">    IP addresses, ports, Bittensor version numbers, and unique identifiers. These details are vital for</span>
<span class="sd">    maintaining network reliability, security, and efficient data flow within the Bittensor network.</span>

<span class="sd">    This class includes Pydantic validators and root validators to enforce data integrity and format. It is</span>
<span class="sd">    designed to be used natively within Synapses, so that you will not need to call this directly, but rather</span>
<span class="sd">    is used as a helper class for Synapses.</span>

<span class="sd">    Args:</span>
<span class="sd">        status_code (int): HTTP status code indicating the result of a network request. Essential for identifying the outcome of network interactions.</span>
<span class="sd">        status_message (str): Descriptive message associated with the status code, providing additional context about the request&#39;s result.</span>
<span class="sd">        process_time (float): Time taken by the terminal to process the call, important for performance monitoring and optimization.</span>
<span class="sd">        ip (str): IP address of the terminal, crucial for network routing and data transmission.</span>
<span class="sd">        port (int): Network port used by the terminal, key for establishing network connections.</span>
<span class="sd">        version (int): Bittensor version running on the terminal, ensuring compatibility between different nodes in the network.</span>
<span class="sd">        nonce (int): Unique, monotonically increasing number for each terminal, aiding in identifying and ordering network interactions.</span>
<span class="sd">        uuid (str): Unique identifier for the terminal, fundamental for network security and identification.</span>
<span class="sd">        hotkey (str): Encoded hotkey string of the terminal wallet, important for transaction and identity verification in the network.</span>
<span class="sd">        signature (str): Digital signature verifying the tuple of nonce, axon_hotkey, dendrite_hotkey, and uuid, critical for ensuring data authenticity and security.</span>

<span class="sd">    Usage::</span>

<span class="sd">        # Creating a TerminalInfo instance</span>
<span class="sd">        from bittensor.core.synapse import TerminalInfo</span>

<span class="sd">        terminal_info = TerminalInfo(</span>
<span class="sd">            status_code=200,</span>
<span class="sd">            status_message=&quot;Success&quot;,</span>
<span class="sd">            process_time=0.1,</span>
<span class="sd">            ip=&quot;198.123.23.1&quot;,</span>
<span class="sd">            port=9282,</span>
<span class="sd">            version=111,</span>
<span class="sd">            nonce=111111,</span>
<span class="sd">            uuid=&quot;5ecbd69c-1cec-11ee-b0dc-e29ce36fec1a&quot;,</span>
<span class="sd">            hotkey=&quot;5EnjDGNqqWnuL2HCAdxeEtN2oqtXZw6BMBe936Kfy2PFz1J1&quot;,</span>
<span class="sd">            signature=&quot;0x0813029319030129u4120u10841824y0182u091u230912u&quot;</span>
<span class="sd">        )</span>

<span class="sd">        # Accessing TerminalInfo attributes</span>
<span class="sd">        ip_address = terminal_info.ip</span>
<span class="sd">        processing_duration = terminal_info.process_time</span>

<span class="sd">        # TerminalInfo can be used to monitor and verify network interactions, ensuring proper communication and security within the Bittensor network.</span>

<span class="sd">    TerminalInfo plays a pivotal role in providing transparency and control over network operations, making it an indispensable tool for developers and users interacting with the Bittensor ecosystem.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">validate_assignment</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># The HTTP status code from: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status</span>
    <span class="n">status_code</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;status_code&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The HTTP status code from: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="mi">200</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The HTTP status code from: https://developer.mozilla.org/en-US/docs/Web/HTTP/Status</span>
    <span class="n">status_message</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;status_message&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The status_message associated with the status_code&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Success&quot;</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Process time on this terminal side of call</span>
    <span class="n">process_time</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;process_time&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Process time on this terminal side of call&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="mf">0.1</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The terminal ip.</span>
    <span class="n">ip</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;ip&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The ip of the axon receiving the request.&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;198.123.23.1&quot;</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The host port of the terminal.</span>
    <span class="n">port</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;port&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The port of the terminal.&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;9282&quot;</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The bittensor version on the terminal as an int.</span>
    <span class="n">version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;version&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The bittensor version on the axon as str(int)&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="mi">111</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># A Unix timestamp to associate with the terminal</span>
    <span class="n">nonce</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;nonce&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A Unix timestamp that prevents replay attacks&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="mi">111111</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># A unique identifier associated with the terminal, set on the axon side.</span>
    <span class="n">uuid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;uuid&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A unique identifier associated with the terminal&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;5ecbd69c-1cec-11ee-b0dc-e29ce36fec1a&quot;</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The bittensor version on the terminal as an int.</span>
    <span class="n">hotkey</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;hotkey&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The ss58 encoded hotkey string of the terminal wallet.&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;5EnjDGNqqWnuL2HCAdxeEtN2oqtXZw6BMBe936Kfy2PFz1J1&quot;</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># A signature verifying the tuple (axon_nonce, axon_hotkey, dendrite_hotkey, axon_uuid)</span>
    <span class="n">signature</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;signature&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;A signature verifying the tuple (nonce, axon_hotkey, dendrite_hotkey, uuid)&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;0x0813029319030129u4120u10841824y0182u091u230912u&quot;</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># Extract the process time on this terminal side of call as a float</span>
    <span class="n">_extract_process_time</span> <span class="o">=</span> <span class="n">field_validator</span><span class="p">(</span><span class="s2">&quot;process_time&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)(</span><span class="n">cast_float</span><span class="p">)</span>

    <span class="c1"># Extract the host port of the terminal as an int</span>
    <span class="n">_extract_port</span> <span class="o">=</span> <span class="n">field_validator</span><span class="p">(</span><span class="s2">&quot;port&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)(</span><span class="n">cast_int</span><span class="p">)</span>

    <span class="c1"># Extract the bittensor version on the terminal as an int.</span>
    <span class="n">_extract_version</span> <span class="o">=</span> <span class="n">field_validator</span><span class="p">(</span><span class="s2">&quot;version&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)(</span><span class="n">cast_int</span><span class="p">)</span>

    <span class="c1"># Extract the Unix timestamp associated with the terminal as an int</span>
    <span class="n">_extract_nonce</span> <span class="o">=</span> <span class="n">field_validator</span><span class="p">(</span><span class="s2">&quot;nonce&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)(</span><span class="n">cast_int</span><span class="p">)</span>

    <span class="c1"># Extract the HTTP status code as an int</span>
    <span class="n">_extract_status_code</span> <span class="o">=</span> <span class="n">field_validator</span><span class="p">(</span><span class="s2">&quot;status_code&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)(</span><span class="n">cast_int</span><span class="p">)</span></div>



<div class="viewcode-block" id="Synapse">
<a class="viewcode-back" href="../../../autoapi/bittensor/index.html#bittensor.core.synapse.Synapse">[docs]</a>
<span class="k">class</span> <span class="nc">Synapse</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Represents a Synapse in the Bittensor network, serving as a communication schema between neurons (nodes).</span>

<span class="sd">    Synapses ensure the format and correctness of transmission tensors according to the Bittensor protocol.</span>
<span class="sd">    Each Synapse type is tailored for a specific machine learning (ML) task, following unique compression and</span>
<span class="sd">    communication processes. This helps maintain sanitized, correct, and useful information flow across the network.</span>

<span class="sd">    The Synapse class encompasses essential network properties such as HTTP route names, timeouts, request sizes, and</span>
<span class="sd">    terminal information. It also includes methods for serialization, deserialization, attribute setting, and hash</span>
<span class="sd">    computation, ensuring secure and efficient data exchange in the network.</span>

<span class="sd">    The class includes Pydantic validators and root validators to enforce data integrity and format. Additionally,</span>
<span class="sd">    properties like ``is_success``, ``is_failure``, ``is_timeout``, etc., provide convenient status checks based on</span>
<span class="sd">    dendrite responses.</span>

<span class="sd">    Think of Bittensor Synapses as glorified pydantic wrappers that have been designed to be used in a distributed</span>
<span class="sd">    network. They provide a standardized way to communicate between neurons, and are the primary mechanism for</span>
<span class="sd">    communication between neurons in Bittensor.</span>

<span class="sd">    Key Features:</span>

<span class="sd">    1. HTTP Route Name (``name`` attribute):</span>
<span class="sd">        Enables the identification and proper routing of requests within the network. Essential for users</span>
<span class="sd">        defining custom routes for specific machine learning tasks.</span>

<span class="sd">    2. Query Timeout (``timeout`` attribute):</span>
<span class="sd">        Determines the maximum duration allowed for a query, ensuring timely responses and network</span>
<span class="sd">        efficiency. Crucial for users to manage network latency and response times, particularly in</span>
<span class="sd">        time-sensitive applications.</span>

<span class="sd">    3. Request Sizes (``total_size``, ``header_size`` attributes):</span>
<span class="sd">        Keeps track of the size of request bodies and headers, ensuring efficient data transmission without</span>
<span class="sd">        overloading the network. Important for users to monitor and optimize the data payload, especially</span>
<span class="sd">        in bandwidth-constrained environments.</span>

<span class="sd">    4. Terminal Information (``dendrite``, ``axon`` attributes):</span>
<span class="sd">        Stores information about the dendrite (receiving end) and axon (sending end), facilitating communication</span>
<span class="sd">        between nodes. Users can access detailed information about the communication endpoints, aiding in</span>
<span class="sd">        debugging and network analysis.</span>

<span class="sd">    5. Body Hash Computation (``computed_body_hash``, ``required_hash_fields``):</span>
<span class="sd">        Ensures data integrity and security by computing hashes of transmitted data. Provides users with a</span>
<span class="sd">        mechanism to verify data integrity and detect any tampering during transmission.</span>
<span class="sd">        It is recommended that names of fields in `required_hash_fields` are listed in the order they are</span>
<span class="sd">        defined in the class.</span>

<span class="sd">    6. Serialization and Deserialization Methods:</span>
<span class="sd">        Facilitates the conversion of Synapse objects to and from a format suitable for network transmission.</span>
<span class="sd">        Essential for users who need to customize data formats for specific machine learning models or tasks.</span>

<span class="sd">    7. Status Check Properties (``is_success``, ``is_failure``, ``is_timeout``, etc.):</span>
<span class="sd">        Provides quick and easy methods to check the status of a request, improving error handling and</span>
<span class="sd">        response management. Users can efficiently handle different outcomes of network requests, enhancing</span>
<span class="sd">        the robustness of their applications.</span>

<span class="sd">    Example usage::</span>

<span class="sd">        # Creating a Synapse instance with default values</span>
<span class="sd">        from bittensor.core.synapse import Synapse</span>

<span class="sd">        synapse = Synapse()</span>

<span class="sd">        # Setting properties and input</span>
<span class="sd">        synapse.timeout = 15.0</span>
<span class="sd">        synapse.name = &quot;MySynapse&quot;</span>

<span class="sd">        # Not setting fields that are not defined in your synapse class will result in an error, e.g.:</span>
<span class="sd">        synapse.dummy_input = 1 # This will raise an error because dummy_input is not defined in the Synapse class</span>

<span class="sd">        # Get a dictionary of headers and body from the synapse instance</span>
<span class="sd">        synapse_dict = synapse.model_dump_json()</span>

<span class="sd">        # Get a dictionary of headers from the synapse instance</span>
<span class="sd">        headers = synapse.to_headers()</span>

<span class="sd">        # Reconstruct the synapse from headers using the classmethod &#39;from_headers&#39;</span>
<span class="sd">        synapse = Synapse.from_headers(headers)</span>

<span class="sd">        # Deserialize synapse after receiving it over the network, controlled by `deserialize` method</span>
<span class="sd">        deserialized_synapse = synapse.deserialize()</span>

<span class="sd">        # Checking the status of the request</span>
<span class="sd">        if synapse.is_success:</span>
<span class="sd">            print(&quot;Request succeeded&quot;)</span>

<span class="sd">        # Checking and setting the status of the request</span>
<span class="sd">        print(synapse.axon.status_code)</span>
<span class="sd">        synapse.axon.status_code = 408 # Timeout</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): HTTP route name, set on :func:`axon.attach`.</span>
<span class="sd">        timeout (float): Total query length, set by the dendrite terminal.</span>
<span class="sd">        total_size (int): Total size of request body in bytes.</span>
<span class="sd">        header_size (int): Size of request header in bytes.</span>
<span class="sd">        dendrite (:func:`TerminalInfo`): Information about the dendrite terminal.</span>
<span class="sd">        axon (:func:`TerminalInfo`): Information about the axon terminal.</span>
<span class="sd">        computed_body_hash (str): Computed hash of the request body.</span>
<span class="sd">        required_hash_fields (list[str]): Fields required to compute the body hash.</span>

<span class="sd">    Methods:</span>
<span class="sd">        deserialize: Custom deserialization logic for subclasses.</span>
<span class="sd">        __setattr__: Override method to make ``required_hash_fields`` read-only.</span>
<span class="sd">        get_total_size: Calculates and returns the total size of the object.</span>
<span class="sd">        to_headers: Constructs a dictionary of headers from instance properties.</span>
<span class="sd">        body_hash: Computes a SHA3-256 hash of the serialized body.</span>
<span class="sd">        parse_headers_to_inputs: Parses headers to construct an inputs dictionary.</span>
<span class="sd">        from_headers: Creates an instance from a headers dictionary.</span>

<span class="sd">    This class is a cornerstone in the Bittensor framework, providing the necessary tools for secure, efficient, and</span>
<span class="sd">    standardized communication in a decentralized environment.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">validate_assignment</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<div class="viewcode-block" id="Synapse.deserialize">
<a class="viewcode-back" href="../../../autoapi/bittensor/index.html#bittensor.core.synapse.Synapse.deserialize">[docs]</a>
    <span class="k">def</span> <span class="nf">deserialize</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Synapse&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Deserializes the Synapse object.</span>

<span class="sd">        This method is intended to be overridden by subclasses for custom deserialization logic.</span>
<span class="sd">        In the context of the Synapse superclass, this method simply returns the instance itself.</span>
<span class="sd">        When inheriting from this class, subclasses should provide their own implementation for</span>
<span class="sd">        deserialization if specific deserialization behavior is desired.</span>

<span class="sd">        By default, if a subclass does not provide its own implementation of this method, the</span>
<span class="sd">        Synapse&#39;s deserialize method will be used, returning the object instance as-is.</span>

<span class="sd">        In its default form, this method simply returns the instance of the Synapse itself without any modifications. Subclasses of Synapse can override this method to add specific deserialization behaviors, such as converting serialized data back into complex object types or performing additional data integrity checks.</span>

<span class="sd">        Example::</span>

<span class="sd">            class CustomSynapse(Synapse):</span>
<span class="sd">                additional_data: str</span>

<span class="sd">                def deserialize(self) -&gt; &quot;CustomSynapse&quot;:</span>
<span class="sd">                    # Custom deserialization logic</span>
<span class="sd">                    # For example, decoding a base64 encoded string in &#39;additional_data&#39;</span>
<span class="sd">                    if self.additional_data:</span>
<span class="sd">                        self.additional_data = base64.b64decode(self.additional_data).decode(&#39;utf-8&#39;)</span>
<span class="sd">                    return self</span>

<span class="sd">            serialized_data = &#39;{&quot;additional_data&quot;: &quot;SGVsbG8gV29ybGQ=&quot;}&#39;  # Base64 for &#39;Hello World&#39;</span>
<span class="sd">            custom_synapse = CustomSynapse.model_validate_json(serialized_data)</span>
<span class="sd">            deserialized_synapse = custom_synapse.deserialize()</span>

<span class="sd">            # deserialized_synapse.additional_data would now be &#39;Hello World&#39;</span>

<span class="sd">        Returns:</span>
<span class="sd">            Synapse: The deserialized Synapse object. In this default implementation, it returns the object itself.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span></div>


<div class="viewcode-block" id="Synapse.set_name_type">
<a class="viewcode-back" href="../../../autoapi/bittensor/index.html#bittensor.core.synapse.Synapse.set_name_type">[docs]</a>
    <span class="nd">@model_validator</span><span class="p">(</span><span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">set_name_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">values</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
        <span class="n">values</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span>  <span class="c1"># type: ignore</span>
        <span class="k">return</span> <span class="n">values</span></div>


    <span class="c1"># Defines the http route name which is set on axon.attach( callable( request: RequestName ))</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;name&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Defines the http route name which is set on axon.attach( callable( request: RequestName ))&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Forward&quot;</span><span class="p">],</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">default</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The call timeout, set by the dendrite terminal.</span>
    <span class="n">timeout</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;timeout&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Defines the total query length.&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="mf">12.0</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="mf">12.0</span><span class="p">,</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The call timeout, set by the dendrite terminal.</span>
    <span class="n">total_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;total_size&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Total size of request body in bytes.&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="mi">1000</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The call timeout, set by the dendrite terminal.</span>
    <span class="n">header_size</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;header_size&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Size of request header in bytes.&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="mi">1000</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># The dendrite Terminal Information.</span>
    <span class="n">dendrite</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TerminalInfo</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;dendrite&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Dendrite Terminal Information&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;TerminalInfo&quot;</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="n">TerminalInfo</span><span class="p">(),</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="c1"># A axon terminal information</span>
    <span class="n">axon</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">TerminalInfo</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;axon&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;Axon Terminal Information&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;TerminalInfo&quot;</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="n">TerminalInfo</span><span class="p">(),</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">computed_body_hash</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="n">Field</span><span class="p">(</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;computed_body_hash&quot;</span><span class="p">,</span>
        <span class="n">description</span><span class="o">=</span><span class="s2">&quot;The computed body hash of the request.&quot;</span><span class="p">,</span>
        <span class="n">examples</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;0x0813029319030129u4120u10841824y0182u091u230912u&quot;</span><span class="p">],</span>
        <span class="n">default</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="nb">repr</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">required_hash_fields</span><span class="p">:</span> <span class="n">ClassVar</span><span class="p">[</span><span class="nb">tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="o">...</span><span class="p">]]</span> <span class="o">=</span> <span class="p">()</span>

    <span class="n">_extract_total_size</span> <span class="o">=</span> <span class="n">field_validator</span><span class="p">(</span><span class="s2">&quot;total_size&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)(</span><span class="n">cast_int</span><span class="p">)</span>

    <span class="n">_extract_header_size</span> <span class="o">=</span> <span class="n">field_validator</span><span class="p">(</span><span class="s2">&quot;header_size&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)(</span><span class="n">cast_int</span><span class="p">)</span>

    <span class="n">_extract_timeout</span> <span class="o">=</span> <span class="n">field_validator</span><span class="p">(</span><span class="s2">&quot;timeout&quot;</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;before&quot;</span><span class="p">)(</span><span class="n">cast_float</span><span class="p">)</span>

<div class="viewcode-block" id="Synapse.__setattr__">
<a class="viewcode-back" href="../../../autoapi/bittensor/index.html#bittensor.core.synapse.Synapse.__setattr__">[docs]</a>
    <span class="k">def</span> <span class="fm">__setattr__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">Any</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Override the :func:`__setattr__` method to make the ``required_hash_fields`` property read-only.</span>

<span class="sd">        This is a security mechanism such that the ``required_hash_fields`` property cannot be</span>
<span class="sd">        overridden by the user or malicious code.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;body_hash&quot;</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span>
                <span class="s2">&quot;body_hash property is read-only and cannot be overridden.&quot;</span>
            <span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__setattr__</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span></div>


<div class="viewcode-block" id="Synapse.get_total_size">
<a class="viewcode-back" href="../../../autoapi/bittensor/index.html#bittensor.core.synapse.Synapse.get_total_size">[docs]</a>
    <span class="k">def</span> <span class="nf">get_total_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the total size of the current object.</span>

<span class="sd">        This method first calculates the size of the current object, then assigns it</span>
<span class="sd">        to the instance variable :func:`self.total_size` and finally returns this value.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: The total size of the current object.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">total_size</span> <span class="o">=</span> <span class="n">get_size</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">total_size</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_success</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the dendrite&#39;s status code indicates success.</span>

<span class="sd">        This method returns ``True`` if the status code of the dendrite is ``200``,</span>
<span class="sd">        which typically represents a successful HTTP request.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: ``True`` if dendrite&#39;s status code is ``200``, ``False`` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dendrite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">dendrite</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_failure</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the dendrite&#39;s status code indicates failure.</span>

<span class="sd">        This method returns ``True`` if the status code of the dendrite is not ``200``,</span>
<span class="sd">        which would mean the HTTP request was not successful.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: ``True`` if dendrite&#39;s status code is not ``200``, ``False`` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dendrite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">dendrite</span><span class="o">.</span><span class="n">status_code</span> <span class="o">!=</span> <span class="mi">200</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_timeout</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the dendrite&#39;s status code indicates a timeout.</span>

<span class="sd">        This method returns ``True`` if the status code of the dendrite is ``408``,</span>
<span class="sd">        which is the HTTP status code for a request timeout.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: ``True`` if dendrite&#39;s status code is ``408``, ``False`` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dendrite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">dendrite</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">408</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">is_blacklist</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the dendrite&#39;s status code indicates a blacklisted request.</span>

<span class="sd">        This method returns ``True`` if the status code of the dendrite is ``403``,</span>
<span class="sd">        which is the HTTP status code for a forbidden request.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: ``True`` if dendrite&#39;s status code is ``403``, ``False`` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dendrite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">dendrite</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">403</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">failed_verification</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Checks if the dendrite&#39;s status code indicates failed verification.</span>

<span class="sd">        This method returns ``True`` if the status code of the dendrite is ``401``,</span>
<span class="sd">        which is the HTTP status code for unauthorized access.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: ``True`` if dendrite&#39;s status code is ``401``, ``False`` otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">dendrite</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">dendrite</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">401</span>

<div class="viewcode-block" id="Synapse.get_required_fields">
<a class="viewcode-back" href="../../../autoapi/bittensor/index.html#bittensor.core.synapse.Synapse.get_required_fields">[docs]</a>
    <span class="k">def</span> <span class="nf">get_required_fields</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Get the required fields from the model&#39;s JSON schema.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">schema</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">model_json_schema</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">schema</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;required&quot;</span><span class="p">,</span> <span class="p">[])</span></div>


<div class="viewcode-block" id="Synapse.to_headers">
<a class="viewcode-back" href="../../../autoapi/bittensor/index.html#bittensor.core.synapse.Synapse.to_headers">[docs]</a>
    <span class="k">def</span> <span class="nf">to_headers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts the state of a Synapse instance into a dictionary of HTTP headers.</span>

<span class="sd">        This method is essential for</span>
<span class="sd">        packaging Synapse data for network transmission in the Bittensor framework, ensuring that each key aspect of</span>
<span class="sd">        the Synapse is represented in a format suitable for HTTP communication.</span>

<span class="sd">        Process:</span>

<span class="sd">        1. Basic Information: It starts by including the ``name`` and ``timeout`` of the Synapse, which are fundamental for identifying the query and managing its lifespan on the network.</span>
<span class="sd">        2. Complex Objects: The method serializes the ``axon`` and ``dendrite`` objects, if present, into strings. This serialization is crucial for preserving the state and structure of these objects over the network.</span>
<span class="sd">        3. Encoding: Non-optional complex objects are serialized and encoded in base64, making them safe for HTTP transport.</span>
<span class="sd">        4. Size Metrics: The method calculates and adds the size of headers and the total object size, providing valuable information for network bandwidth management.</span>

<span class="sd">        Example Usage::</span>

<span class="sd">            synapse = Synapse(name=&quot;ExampleSynapse&quot;, timeout=30)</span>
<span class="sd">            headers = synapse.to_headers()</span>
<span class="sd">            # headers now contains a dictionary representing the Synapse instance</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A dictionary containing key-value pairs representing the Synapse&#39;s properties, suitable for HTTP communication.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Initializing headers with &#39;name&#39; and &#39;timeout&#39;</span>
        <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">name</span><span class="p">,</span> <span class="s2">&quot;timeout&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">timeout</span><span class="p">)}</span>

        <span class="c1"># Adding headers for &#39;axon&#39; and &#39;dendrite&#39; if they are not None</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">axon</span><span class="p">:</span>
            <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="sa">f</span><span class="s2">&quot;bt_header_axon_</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">axon</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="p">}</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">dendrite</span><span class="p">:</span>
            <span class="n">headers</span><span class="o">.</span><span class="n">update</span><span class="p">(</span>
                <span class="p">{</span>
                    <span class="sa">f</span><span class="s2">&quot;bt_header_dendrite_</span><span class="si">{</span><span class="n">k</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">dendrite</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
                    <span class="k">if</span> <span class="n">v</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
                <span class="p">}</span>
            <span class="p">)</span>

        <span class="c1"># Getting the fields of the instance</span>
        <span class="n">instance_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>

        <span class="c1"># Iterating over the fields of the instance</span>
        <span class="k">for</span> <span class="n">field</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">instance_fields</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># If the object is not optional, serializing it, encoding it, and adding it to the headers</span>
            <span class="n">required</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_required_fields</span><span class="p">()</span>

            <span class="c1"># Skipping the field if it&#39;s already in the headers or its value is None</span>
            <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">headers</span> <span class="ow">or</span> <span class="n">value</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">continue</span>

            <span class="k">elif</span> <span class="n">required</span> <span class="ow">and</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">required</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="c1"># create an empty (dummy) instance of type(value) to pass pydantic validation on the axon side</span>
                    <span class="n">serialized_value</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="fm">__call__</span><span class="p">())</span>
                    <span class="n">encoded_value</span> <span class="o">=</span> <span class="n">base64</span><span class="o">.</span><span class="n">b64encode</span><span class="p">(</span><span class="n">serialized_value</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span>
                        <span class="s2">&quot;utf-8&quot;</span>
                    <span class="p">)</span>
                    <span class="n">headers</span><span class="p">[</span><span class="sa">f</span><span class="s2">&quot;bt_header_input_obj_</span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">encoded_value</span>
                <span class="k">except</span> <span class="ne">TypeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Error serializing </span><span class="si">{</span><span class="n">field</span><span class="si">}</span><span class="s2"> with value </span><span class="si">{</span><span class="n">value</span><span class="si">}</span><span class="s2">. Objects must be json serializable.&quot;</span>
                    <span class="p">)</span> <span class="kn">from</span> <span class="nn">e</span>

        <span class="c1"># Adding the size of the headers and the total size to the headers</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;header_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">getsizeof</span><span class="p">(</span><span class="n">headers</span><span class="p">))</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;total_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_total_size</span><span class="p">())</span>
        <span class="n">headers</span><span class="p">[</span><span class="s2">&quot;computed_body_hash&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">body_hash</span>

        <span class="k">return</span> <span class="n">headers</span></div>


    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">body_hash</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Computes a SHA3-256 hash of the serialized body of the Synapse instance.</span>

<span class="sd">        This hash is used to</span>
<span class="sd">        ensure the data integrity and security of the Synapse instance when it&#39;s transmitted across the</span>
<span class="sd">        network. It is a crucial feature for verifying that the data received is the same as the data sent.</span>

<span class="sd">        Process:</span>

<span class="sd">        1. Iterates over each required field as specified in ``required_hash_fields``.</span>
<span class="sd">        2. Concatenates the string representation of these fields.</span>
<span class="sd">        3. Applies SHA3-256 hashing to the concatenated string to produce a unique fingerprint of the data.</span>

<span class="sd">        Example::</span>

<span class="sd">            synapse = Synapse(name=&quot;ExampleRoute&quot;, timeout=10)</span>
<span class="sd">            hash_value = synapse.body_hash</span>
<span class="sd">            # hash_value is the SHA3-256 hash of the serialized body of the Synapse instance</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The SHA3-256 hash as a hexadecimal string, providing a fingerprint of the Synapse instance&#39;s data for integrity checks.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">hashes</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">hash_fields_field</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_fields</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;required_hash_fields&quot;</span><span class="p">)</span>
        <span class="n">instance_fields</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">if</span> <span class="n">hash_fields_field</span><span class="p">:</span>
            <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                <span class="s2">&quot;The &#39;required_hash_fields&#39; field handling deprecated and will be removed. &quot;</span>
                <span class="s2">&quot;Please update Synapse class definition to use &#39;required_hash_fields&#39; class variable instead.&quot;</span><span class="p">,</span>
                <span class="ne">DeprecationWarning</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">required_hash_fields</span> <span class="o">=</span> <span class="n">hash_fields_field</span><span class="o">.</span><span class="n">default</span>

            <span class="k">if</span> <span class="n">required_hash_fields</span><span class="p">:</span>
                <span class="n">instance_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
                <span class="c1"># Preserve backward compatibility in which fields will added in .model_dump() order</span>
                <span class="c1"># instead of the order one from `self.required_hash_fields`</span>
                <span class="n">required_hash_fields</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">field</span> <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">instance_fields</span> <span class="k">if</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">required_hash_fields</span>
                <span class="p">]</span>

                <span class="c1"># Hack to cache the required hash fields names</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">required_hash_fields</span><span class="p">)</span> <span class="o">==</span> <span class="nb">len</span><span class="p">(</span><span class="n">required_hash_fields</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">required_hash_fields</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">required_hash_fields</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">required_hash_fields</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="n">required_hash_fields</span>

        <span class="k">if</span> <span class="n">required_hash_fields</span><span class="p">:</span>
            <span class="n">instance_fields</span> <span class="o">=</span> <span class="n">instance_fields</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">model_dump</span><span class="p">()</span>
            <span class="k">for</span> <span class="n">field</span> <span class="ow">in</span> <span class="n">required_hash_fields</span><span class="p">:</span>
                <span class="n">hashes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">get_hash</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">instance_fields</span><span class="p">[</span><span class="n">field</span><span class="p">])))</span>

        <span class="k">return</span> <span class="n">get_hash</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">hashes</span><span class="p">))</span>

<div class="viewcode-block" id="Synapse.parse_headers_to_inputs">
<a class="viewcode-back" href="../../../autoapi/bittensor/index.html#bittensor.core.synapse.Synapse.parse_headers_to_inputs">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">parse_headers_to_inputs</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">headers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Interprets and transforms a given dictionary of headers into a structured dictionary, facilitating the reconstruction of Synapse objects.</span>

<span class="sd">        This method is essential for parsing network-transmitted</span>
<span class="sd">        data back into a Synapse instance, ensuring data consistency and integrity.</span>

<span class="sd">        Process:</span>

<span class="sd">        1. Separates headers into categories based on prefixes (``axon``, ``dendrite``, etc.).</span>
<span class="sd">        2. Decodes and deserializes ``input_obj`` headers into their original objects.</span>
<span class="sd">        3. Assigns simple fields directly from the headers to the input dictionary.</span>

<span class="sd">        Example::</span>

<span class="sd">            received_headers = {</span>
<span class="sd">                &#39;bt_header_axon_address&#39;: &#39;127.0.0.1&#39;,</span>
<span class="sd">                &#39;bt_header_dendrite_port&#39;: &#39;8080&#39;,</span>
<span class="sd">                # Other headers...</span>
<span class="sd">            }</span>
<span class="sd">            inputs = Synapse.parse_headers_to_inputs(received_headers)</span>
<span class="sd">            # inputs now contains a structured representation of Synapse properties based on the headers</span>

<span class="sd">        Note:</span>
<span class="sd">            This is handled automatically when calling :func:`Synapse.from_headers(headers)` and does not need to be called directly.</span>

<span class="sd">        Args:</span>
<span class="sd">            headers (dict): The headers dictionary to parse.</span>

<span class="sd">        Returns:</span>
<span class="sd">            dict: A structured dictionary representing the inputs for constructing a Synapse instance.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Initialize the input dictionary with empty sub-dictionaries for &#39;axon&#39; and &#39;dendrite&#39;</span>
        <span class="n">inputs_dict</span><span class="p">:</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">dict</span><span class="p">,</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;axon&quot;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s2">&quot;dendrite&quot;</span><span class="p">:</span> <span class="p">{},</span>
        <span class="p">}</span>

        <span class="c1"># Iterate over each item in the headers</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">headers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="c1"># Handle &#39;axon&#39; headers</span>
            <span class="k">if</span> <span class="s2">&quot;bt_header_axon_&quot;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">new_key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;bt_header_axon_&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">axon_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="n">inputs_dict</span><span class="p">[</span><span class="s2">&quot;axon&quot;</span><span class="p">])</span>
                    <span class="n">axon_dict</span><span class="p">[</span><span class="n">new_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error while parsing &#39;axon&#39; header </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">continue</span>
            <span class="c1"># Handle &#39;dendrite&#39; headers</span>
            <span class="k">elif</span> <span class="s2">&quot;bt_header_dendrite_&quot;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">new_key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;bt_header_dendrite_&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">dendrite_dict</span> <span class="o">=</span> <span class="n">cast</span><span class="p">(</span><span class="nb">dict</span><span class="p">,</span> <span class="n">inputs_dict</span><span class="p">[</span><span class="s2">&quot;dendrite&quot;</span><span class="p">])</span>
                    <span class="n">dendrite_dict</span><span class="p">[</span><span class="n">new_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error while parsing &#39;dendrite&#39; header </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">continue</span>
            <span class="c1"># Handle &#39;input_obj&#39; headers</span>
            <span class="k">elif</span> <span class="s2">&quot;bt_header_input_obj&quot;</span> <span class="ow">in</span> <span class="n">key</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">new_key</span> <span class="o">=</span> <span class="n">key</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;bt_header_input_obj_&quot;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
                    <span class="c1"># Skip if the key already exists in the dictionary</span>
                    <span class="k">if</span> <span class="n">new_key</span> <span class="ow">in</span> <span class="n">inputs_dict</span><span class="p">:</span>
                        <span class="k">continue</span>
                    <span class="c1"># Decode and load the serialized object</span>
                    <span class="n">inputs_dict</span><span class="p">[</span><span class="n">new_key</span><span class="p">]</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span>
                        <span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">value</span><span class="o">.</span><span class="n">encode</span><span class="p">())</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="k">except</span> <span class="n">json</span><span class="o">.</span><span class="n">JSONDecodeError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span>
                        <span class="sa">f</span><span class="s2">&quot;Error while json decoding &#39;input_obj&#39; header </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span>
                    <span class="p">)</span>
                    <span class="k">continue</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="n">logging</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error while parsing &#39;input_obj&#39; header </span><span class="si">{</span><span class="n">key</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="k">continue</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">pass</span>  <span class="c1"># TODO: log unexpected keys</span>

        <span class="c1"># Assign the remaining known headers directly</span>
        <span class="n">inputs_dict</span><span class="p">[</span><span class="s2">&quot;timeout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;timeout&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">inputs_dict</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">inputs_dict</span><span class="p">[</span><span class="s2">&quot;header_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;header_size&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">inputs_dict</span><span class="p">[</span><span class="s2">&quot;total_size&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;total_size&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="n">inputs_dict</span><span class="p">[</span><span class="s2">&quot;computed_body_hash&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">headers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;computed_body_hash&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">inputs_dict</span></div>


<div class="viewcode-block" id="Synapse.from_headers">
<a class="viewcode-back" href="../../../autoapi/bittensor/index.html#bittensor.core.synapse.Synapse.from_headers">[docs]</a>
    <span class="nd">@classmethod</span>
    <span class="k">def</span> <span class="nf">from_headers</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">headers</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="s2">&quot;Synapse&quot;</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Constructs a new Synapse instance from a given headers dictionary, enabling the re-creation of the Synapse&#39;s state as it was prior to network transmission.</span>

<span class="sd">        This method is a key part of the</span>
<span class="sd">        deserialization process in the Bittensor network, allowing nodes to accurately reconstruct Synapse</span>
<span class="sd">        objects from received data.</span>

<span class="sd">        Example::</span>

<span class="sd">            received_headers = {</span>
<span class="sd">                &#39;bt_header_axon_address&#39;: &#39;127.0.0.1&#39;,</span>
<span class="sd">                &#39;bt_header_dendrite_port&#39;: &#39;8080&#39;,</span>
<span class="sd">                # Other headers...</span>
<span class="sd">            }</span>
<span class="sd">            synapse = Synapse.from_headers(received_headers)</span>
<span class="sd">            # synapse is a new Synapse instance reconstructed from the received headers</span>

<span class="sd">        Args:</span>
<span class="sd">            headers (dict): The dictionary of headers containing serialized Synapse information.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bittensor.core.synapse.Synapse: A new instance of Synapse, reconstructed from the parsed header information, replicating the original instance&#39;s state.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Get the inputs dictionary from the headers</span>
        <span class="n">input_dict</span> <span class="o">=</span> <span class="bp">cls</span><span class="o">.</span><span class="n">parse_headers_to_inputs</span><span class="p">(</span><span class="n">headers</span><span class="p">)</span>

        <span class="c1"># Use the dictionary unpacking operator to pass the inputs to the class constructor</span>
        <span class="n">synapse</span> <span class="o">=</span> <span class="bp">cls</span><span class="p">(</span><span class="o">**</span><span class="n">input_dict</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">synapse</span></div>
</div>

</pre></div>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Opentensor Foundation
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024, Opentensor Foundation.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>